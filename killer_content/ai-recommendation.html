<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI 추천 - i know you_AI</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .chat-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .chat-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #1e1e2a 0%, #2a2a3a 100%);
      border-radius: 12px;
      border: 1px solid #2a2a3a;
    }
    
    .chat-header h1 {
      color: #ffffff;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .chat-header p {
      color: #b7b7c7;
      font-size: 16px;
      line-height: 1.5;
    }
    
    .chat-messages {
      height: 400px;
      overflow-y: auto;
      padding: 20px;
      background: #1e1e2a;
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    
    .message {
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .message.user {
      flex-direction: row-reverse;
    }
    
    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }
    
    .message.user .message-avatar {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
    }
    
    .message.ai .message-avatar {
      background: linear-gradient(135deg, #50c878, #3cb371);
      color: white;
    }
    
    .message-content {
      flex: 1;
      max-width: 70%;
    }
    
    .message.user .message-content {
      text-align: right;
    }
    
    .message-bubble {
      padding: 12px 16px;
      border-radius: 18px;
      display: inline-block;
      word-wrap: break-word;
      max-width: 100%;
    }
    
    .message.user .message-bubble {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      border-bottom-right-radius: 4px;
    }
    
    .message.ai .message-bubble {
      background: #2a2a3a;
      color: #ffffff;
      border: 1px solid #3a3a4a;
      border-bottom-left-radius: 4px;
    }
    
    .message-time {
      font-size: 11px;
      color: #888;
      margin-top: 4px;
      opacity: 0.7;
    }
    
    .chat-input-container {
      display: flex;
      gap: 12px;
      align-items: flex-end;
    }
    
    .chat-input {
      flex: 1;
      min-height: 60px;
      padding: 16px;
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      background: #1e1e2a;
      color: #ffffff;
      font-size: 14px;
      resize: vertical;
      font-family: inherit;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: #4a90e2;
      box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
    }
    
    .chat-input::placeholder {
      color: #888;
    }
    
    .send-button {
      padding: 16px 24px;
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
      white-space: nowrap;
    }
    
    .send-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
    }
    
    .send-button:disabled {
      background: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .recommendation-result {
      margin-top: 30px;
      padding: 24px;
      background: linear-gradient(135deg, #1e1e2a 0%, #2a2a3a 100%);
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      display: none;
    }
    
    .recommendation-header {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .recommendation-header h2 {
      color: #ffffff;
      margin-bottom: 8px;
    }
    
    .recommendation-header p {
      color: #b7b7c7;
    }
    
    .recommendation-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }
    
    .recommendation-item {
      background: #1e1e2a;
      border: 1px solid #3a3a4a;
      border-radius: 8px;
      padding: 20px;
    }
    
    .recommendation-item h3 {
      color: #4a90e2;
      margin-bottom: 12px;
      font-size: 18px;
    }
    
    .recommendation-item p {
      color: #b7b7c7;
      line-height: 1.5;
      margin-bottom: 8px;
    }
    
    .recommendation-actions {
      text-align: center;
    }
    
    .action-button {
      padding: 12px 24px;
      margin: 0 8px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-accept {
      background: linear-gradient(135deg, #50c878, #3cb371);
      color: white;
    }
    
    .btn-accept:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(80, 200, 120, 0.3);
    }
    
    .btn-modify {
      background: #2a2a3a;
      color: #b7b7c7;
      border: 1px solid #3a3a4a;
    }
    
    .btn-modify:hover {
      background: #3a3a4a;
      color: #ffffff;
    }
    
    .typing-indicator {
      display: none;
      align-items: center;
      gap: 8px;
      color: #888;
      font-style: italic;
    }
    
    .typing-dots {
      display: flex;
      gap: 4px;
    }
    
    .typing-dot {
      width: 6px;
      height: 6px;
      background: #888;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typing {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
    
    .example-prompts {
      margin-top: 20px;
      padding: 16px;
      background: #1e1e2a;
      border: 1px solid #2a2a3a;
      border-radius: 8px;
    }
    
    .example-prompts h4 {
      color: #b7b7c7;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .prompt-examples {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .prompt-example {
      padding: 6px 12px;
      background: #2a2a3a;
      border: 1px solid #3a3a4a;
      border-radius: 16px;
      color: #b7b7c7;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .prompt-example:hover {
      background: #3a3a4a;
      color: #ffffff;
      border-color: #4a90e2;
    }
    
    @media (max-width: 768px) {
      .recommendation-grid {
        grid-template-columns: 1fr;
      }
      
      .chat-input-container {
        flex-direction: column;
      }
      
      .send-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- 좌측 메뉴 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>i know you_AI</h3>
        <p>비즈니스 전략 지원 AI</p>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section current-step-section">
          <h4>현재 단계: 리서치</h4>
          <div class="step-progress-indicator">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 20%"></div>
            </div>
            <span class="progress-text">1/5 단계 완료</span>
          </div>
          <ul>
            <li><a href="index.html" class="nav-item" data-section="main">
              메인 대시보드
            </a></li>
            <li><a href="ai-recommendation.html" class="nav-item active" data-section="ai-recommendation">
              AI 추천
              <span class="nav-status current">진행 중</span>
            </a></li>
            <li><a href="item-selection.html" class="nav-item" data-section="item-selection">
              아이템 및 타겟 선정
              <span class="nav-status">다음</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section next-step-section">
          <h4>다음 단계: 아이데이션</h4>
          <p class="next-step-desc">리서치 결과를 바탕으로 창의적인 아이디어를 생성합니다</p>
          <ul>
            <li><a href="index.html#ideation" class="nav-item" data-section="ideation">
              아이데이션
              <span class="nav-status locked">잠김</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section future-step-section">
          <h4>향후 단계</h4>
          <p class="next-step-desc">아이데이션 결과를 바탕으로 컨셉을 개발하고 평가합니다</p>
          <ul>
            <li><a href="index.html#concept-development" class="nav-item" data-section="concept-development">
              컨셉 개발
              <span class="nav-status locked">잠김</span>
            </a></li>
            <li><a href="index.html#evaluation-feedback" class="nav-item" data-section="evaluation-feedback">
              평가 및 피드백
              <span class="nav-status locked">잠김</span>
            </a></li>
          </ul>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">홍</div>
          <div class="user-details">
            <div class="user-name">홍길동</div>
            <div class="user-status premium">Premium</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- 메인 콘텐츠 -->
    <main class="main-content">
      <div class="chat-container">
        <!-- 채팅 헤더 -->
        <div class="chat-header">
          <h1>🤖 AI 추천 시스템</h1>
          <p>하고 싶은 프로젝트나 분석하고 싶은 내용을 자유롭게 설명해주세요.<br>
          AI가 최적의 디자인 아이템과 타겟 페르소나를 추천해드립니다.</p>
        </div>

        <!-- 채팅 메시지 영역 -->
        <div class="chat-messages" id="chatMessages">
          <!-- AI 초기 메시지 -->
          <div class="message ai">
            <div class="message-avatar">🤖</div>
            <div class="message-content">
              <div class="message-bubble">
                안녕하세요! 저는 i know you_AI의 추천 시스템입니다. 🎯<br><br>
                분석하고 싶은 제품이나 서비스, 또는 해결하고 싶은 비즈니스 문제에 대해 자유롭게 설명해주세요. 예를 들어:<br><br>
                • "20대 여성을 위한 새로운 뷰티 앱을 만들고 싶어요"<br>
                • "친환경 패키징으로 브랜드 이미지를 개선하고 싶어요"<br>
                • "중장년층을 위한 간편한 모바일 뱅킹 서비스를 기획하고 있어요"<br><br>
                어떤 프로젝트를 진행하고 계신가요?
              </div>
              <div class="message-time">방금 전</div>
            </div>
          </div>
        </div>

        <!-- 채팅 입력 영역 -->
        <div class="chat-input-container">
          <textarea 
            class="chat-input" 
            id="chatInput" 
            placeholder="프로젝트나 분석하고 싶은 내용을 자세히 설명해주세요..."
            rows="3"
          ></textarea>
          <button class="send-button" id="sendButton" onclick="sendMessage()">전송</button>
        </div>

        <!-- 타이핑 표시기 -->
        <div class="typing-indicator" id="typingIndicator">
          <span>AI가 분석 중입니다</span>
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>

        <!-- 예시 프롬프트 -->
        <div class="example-prompts">
          <h4>💡 예시 프롬프트</h4>
          <div class="prompt-examples">
            <div class="prompt-example" onclick="useExamplePrompt(this)">MZ세대를 위한 새로운 커피 브랜드</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">중장년층을 위한 간편한 모바일 앱</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">친환경 패키징 디자인</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">프리미엄 전자제품 브랜딩</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">소셜커머스 플랫폼 UX</div>
          </div>
        </div>

        <!-- AI 추천 결과 -->
        <div class="recommendation-result" id="recommendationResult">
          <div class="recommendation-header">
            <h2>🎯 AI 추천 결과</h2>
            <p>입력하신 내용을 바탕으로 최적의 아이템과 페르소나를 추천합니다</p>
          </div>
          
          <div class="recommendation-grid">
            <div class="recommendation-item">
              <h3>📱 추천 아이템</h3>
              <p id="recommendedItem">스마트폰</p>
              <p>모바일 통신 및 컴퓨팅 디바이스</p>
              <p>AI 카메라, 폴더블 디스플레이, 친환경 소재 등 혁신 기술 적용</p>
            </div>
            
            <div class="recommendation-item">
              <h3>👥 추천 페르소나</h3>
              <p id="recommendedPersonas">P1, P2, P3</p>
              <p>트렌드 민감 MZ, 실용 중심 직장인, 친환경 가치 지향</p>
              <p>다양한 소비층의 니즈를 포괄하는 전략적 접근</p>
            </div>
          </div>
          
          <div class="recommendation-actions">
            <button class="action-button btn-accept" onclick="acceptRecommendation()">추천 수락하기</button>
            <button class="action-button btn-modify" onclick="modifyRecommendation()">다시 추천받기</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    let conversationHistory = [];
    
    // 메시지 전송
    function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (!message) return;
      
      // 사용자 메시지 추가
      addMessage(message, 'user');
      input.value = '';
      
      // AI 응답 시뮬레이션
      showTypingIndicator();
      
      setTimeout(() => {
        hideTypingIndicator();
        const aiResponse = generateAIResponse(message);
        addMessage(aiResponse, 'ai');
        
        // 추천 결과 표시
        setTimeout(() => {
          showRecommendationResult(message);
        }, 1000);
      }, 2000);
    }
    
    // 메시지 추가
    function addMessage(content, sender) {
      const chatMessages = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      
      const avatar = sender === 'user' ? '👤' : '🤖';
      const time = new Date().toLocaleTimeString('ko-KR', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
      
      messageDiv.innerHTML = `
        <div class="message-avatar">${avatar}</div>
        <div class="message-content">
          <div class="message-bubble">${content}</div>
          <div class="message-time">${time}</div>
        </div>
      `;
      
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // 대화 기록 저장
      conversationHistory.push({ sender, content, time });
    }
    
    // AI 응답 생성
    function generateAIResponse(userMessage) {
      const responses = [
        "흥미로운 프로젝트네요! 입력해주신 내용을 바탕으로 분석해보겠습니다. 🧠",
        "좋은 아이디어입니다! 해당 분야의 최신 트렌드와 소비자 니즈를 고려해서 추천해드릴게요. 📊",
        "멋진 프로젝트입니다! 시장 분석과 페르소나 연구를 통해 최적의 방향을 제시해드리겠습니다. 🎯",
        "흥미로운 접근이에요! 현재 시장 상황과 소비자 행동 패턴을 분석해서 추천해드릴게요. 🔍",
        "창의적인 아이디어입니다! 경쟁사 분석과 타겟 고객의 니즈를 파악해서 최적의 전략을 제시하겠습니다. 💡"
      ];
      
      return responses[Math.floor(Math.random() * responses.length)];
    }
    
    // 타이핑 표시기 표시/숨김
    function showTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'flex';
    }
    
    function hideTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'none';
    }
    
    // 추천 결과 표시
    function showRecommendationResult(userMessage) {
      const result = document.getElementById('recommendationResult');
      result.style.display = 'block';
      
      // 사용자 메시지에 따른 맞춤 추천
      const recommendation = analyzeUserMessage(userMessage);
      
      document.getElementById('recommendedItem').textContent = recommendation.item;
      document.getElementById('recommendedPersonas').textContent = recommendation.personas;
      
      // 결과 영역으로 스크롤
      result.scrollIntoView({ behavior: 'smooth' });
    }
    
    // 사용자 메시지 분석 및 추천
    function analyzeUserMessage(message) {
      const lowerMessage = message.toLowerCase();
      
      // 아이템 추천 로직
      let item = '스마트폰';
      if (lowerMessage.includes('커피') || lowerMessage.includes('음료') || lowerMessage.includes('푸드')) {
        item = '커피/음료';
      } else if (lowerMessage.includes('패션') || lowerMessage.includes('의류') || lowerMessage.includes('신발')) {
        item = '패션/의류';
      } else if (lowerMessage.includes('뷰티') || lowerMessage.includes('화장품') || lowerMessage.includes('스킨케어')) {
        item = '뷰티/화장품';
      } else if (lowerMessage.includes('가전') || lowerMessage.includes('전자') || lowerMessage.includes('기기')) {
        item = '가전/전자제품';
      } else if (lowerMessage.includes('자동차') || lowerMessage.includes('차량') || lowerMessage.includes('모빌리티')) {
        item = '자동차/모빌리티';
      }
      
      // 페르소나 추천 로직
      let personas = 'P1, P2, P3';
      if (lowerMessage.includes('mz') || lowerMessage.includes('20대') || lowerMessage.includes('젊은')) {
        personas = 'P1 (트렌드 민감 MZ)';
      } else if (lowerMessage.includes('중장년') || lowerMessage.includes('40대') || lowerMessage.includes('실용')) {
        personas = 'P2 (실용 중심 직장인)';
      } else if (lowerMessage.includes('친환경') || lowerMessage.includes('지속가능') || lowerMessage.includes('환경')) {
        personas = 'P3 (친환경 가치 지향)';
      }
      
      return { item, personas };
    }
    
    // 예시 프롬프트 사용
    function useExamplePrompt(element) {
      const prompt = element.textContent;
      document.getElementById('chatInput').value = prompt;
      document.getElementById('chatInput').focus();
    }
    
    // 추천 수락
    function acceptRecommendation() {
      // item-selection.html로 이동하면서 추천 결과 전달
      const recommendation = {
        item: document.getElementById('recommendedItem').textContent,
        personas: document.getElementById('recommendedPersonas').textContent
      };
      
      localStorage.setItem('aiRecommendation', JSON.stringify(recommendation));
      window.location.href = 'item-selection.html';
    }
    
    // 추천 수정
    function modifyRecommendation() {
      document.getElementById('recommendationResult').style.display = 'none';
      document.getElementById('chatInput').focus();
    }
    
    // Enter 키로 메시지 전송
    document.getElementById('chatInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    
    // 입력 필드 변경 감지
    document.getElementById('chatInput').addEventListener('input', function() {
      const sendButton = document.getElementById('sendButton');
      sendButton.disabled = !this.value.trim();
    });
  </script>
</body>
</html>
