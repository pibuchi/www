<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI ì¶”ì²œ - i know you_AI</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .chat-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .chat-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #1e1e2a 0%, #2a2a3a 100%);
      border-radius: 12px;
      border: 1px solid #2a2a3a;
    }
    
    .chat-header h1 {
      color: #ffffff;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .chat-header p {
      color: #b7b7c7;
      font-size: 16px;
      line-height: 1.5;
    }
    
    .chat-messages {
      height: 400px;
      overflow-y: auto;
      padding: 20px;
      background: #1e1e2a;
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    
    .message {
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .message.user {
      flex-direction: row-reverse;
    }
    
    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }
    
    .message.user .message-avatar {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
    }
    
    .message.ai .message-avatar {
      background: linear-gradient(135deg, #50c878, #3cb371);
      color: white;
    }
    
    .message-content {
      flex: 1;
      max-width: 70%;
    }
    
    .message.user .message-content {
      text-align: right;
    }
    
    .message-bubble {
      padding: 12px 16px;
      border-radius: 18px;
      display: inline-block;
      word-wrap: break-word;
      max-width: 100%;
    }
    
    .message.user .message-bubble {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      border-bottom-right-radius: 4px;
    }
    
    .message.ai .message-bubble {
      background: #2a2a3a;
      color: #ffffff;
      border: 1px solid #3a3a4a;
      border-bottom-left-radius: 4px;
    }
    
    .message-time {
      font-size: 11px;
      color: #888;
      margin-top: 4px;
      opacity: 0.7;
    }
    
    .chat-input-container {
      display: flex;
      gap: 12px;
      align-items: flex-end;
    }
    
    .chat-input {
      flex: 1;
      min-height: 60px;
      padding: 16px;
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      background: #1e1e2a;
      color: #ffffff;
      font-size: 14px;
      resize: vertical;
      font-family: inherit;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: #4a90e2;
      box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
    }
    
    .chat-input::placeholder {
      color: #888;
    }
    
    .send-button {
      padding: 16px 24px;
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
      white-space: nowrap;
    }
    
    .send-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
    }
    
    .send-button:disabled {
      background: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .recommendation-result {
      margin-top: 30px;
      padding: 24px;
      background: linear-gradient(135deg, #1e1e2a 0%, #2a2a3a 100%);
      border: 1px solid #2a2a3a;
      border-radius: 12px;
      display: none;
    }
    
    .recommendation-header {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .recommendation-header h2 {
      color: #ffffff;
      margin-bottom: 8px;
    }
    
    .recommendation-header p {
      color: #b7b7c7;
    }
    
    .recommendation-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }
    
    .recommendation-item {
      background: #1e1e2a;
      border: 1px solid #3a3a4a;
      border-radius: 8px;
      padding: 20px;
    }
    
    .recommendation-item h3 {
      color: #4a90e2;
      margin-bottom: 12px;
      font-size: 18px;
    }
    
    .recommendation-item p {
      color: #b7b7c7;
      line-height: 1.5;
      margin-bottom: 8px;
    }
    
    .recommendation-actions {
      text-align: center;
    }
    
    .action-button {
      padding: 12px 24px;
      margin: 0 8px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-accept {
      background: linear-gradient(135deg, #50c878, #3cb371);
      color: white;
    }
    
    .btn-accept:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(80, 200, 120, 0.3);
    }
    
    .btn-modify {
      background: #2a2a3a;
      color: #b7b7c7;
      border: 1px solid #3a3a4a;
    }
    
    .btn-modify:hover {
      background: #3a3a4a;
      color: #ffffff;
    }
    
    .typing-indicator {
      display: none;
      align-items: center;
      gap: 8px;
      color: #888;
      font-style: italic;
    }
    
    .typing-dots {
      display: flex;
      gap: 4px;
    }
    
    .typing-dot {
      width: 6px;
      height: 6px;
      background: #888;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typing {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
    
    .example-prompts {
      margin-top: 20px;
      padding: 16px;
      background: #1e1e2a;
      border: 1px solid #2a2a3a;
      border-radius: 8px;
    }
    
    .example-prompts h4 {
      color: #b7b7c7;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .prompt-examples {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .prompt-example {
      padding: 6px 12px;
      background: #2a2a3a;
      border: 1px solid #3a3a4a;
      border-radius: 16px;
      color: #b7b7c7;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .prompt-example:hover {
      background: #3a3a4a;
      color: #ffffff;
      border-color: #4a90e2;
    }
    
    @media (max-width: 768px) {
      .recommendation-grid {
        grid-template-columns: 1fr;
      }
      
      .chat-input-container {
        flex-direction: column;
      }
      
      .send-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- ì¢Œì¸¡ ë©”ë‰´ -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>i know you_AI</h3>
        <p>ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëµ ì§€ì› AI</p>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section current-step-section">
          <h4>í˜„ì¬ ë‹¨ê³„: ë¦¬ì„œì¹˜</h4>
          <div class="step-progress-indicator">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 20%"></div>
            </div>
            <span class="progress-text">1/5 ë‹¨ê³„ ì™„ë£Œ</span>
          </div>
          <ul>
            <li><a href="index.html" class="nav-item" data-section="main">
              ë©”ì¸ ëŒ€ì‹œë³´ë“œ
            </a></li>
            <li><a href="ai-recommendation.html" class="nav-item active" data-section="ai-recommendation">
              AI ì¶”ì²œ
              <span class="nav-status current">ì§„í–‰ ì¤‘</span>
            </a></li>
            <li><a href="item-selection.html" class="nav-item" data-section="item-selection">
              ì•„ì´í…œ ë° íƒ€ê²Ÿ ì„ ì •
              <span class="nav-status">ë‹¤ìŒ</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section next-step-section">
          <h4>ë‹¤ìŒ ë‹¨ê³„: ì•„ì´ë°ì´ì…˜</h4>
          <p class="next-step-desc">ë¦¬ì„œì¹˜ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</p>
          <ul>
            <li><a href="index.html#ideation" class="nav-item" data-section="ideation">
              ì•„ì´ë°ì´ì…˜
              <span class="nav-status locked">ì ê¹€</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section future-step-section">
          <h4>í–¥í›„ ë‹¨ê³„</h4>
          <p class="next-step-desc">ì•„ì´ë°ì´ì…˜ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì»¨ì…‰ì„ ê°œë°œí•˜ê³  í‰ê°€í•©ë‹ˆë‹¤</p>
          <ul>
            <li><a href="index.html#concept-development" class="nav-item" data-section="concept-development">
              ì»¨ì…‰ ê°œë°œ
              <span class="nav-status locked">ì ê¹€</span>
            </a></li>
            <li><a href="index.html#evaluation-feedback" class="nav-item" data-section="evaluation-feedback">
              í‰ê°€ ë° í”¼ë“œë°±
              <span class="nav-status locked">ì ê¹€</span>
            </a></li>
          </ul>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">í™</div>
          <div class="user-details">
            <div class="user-name">í™ê¸¸ë™</div>
            <div class="user-status premium">Premium</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
      <div class="chat-container">
        <!-- ì±„íŒ… í—¤ë” -->
        <div class="chat-header">
          <h1>ğŸ¤– AI ì¶”ì²œ ì‹œìŠ¤í…œ</h1>
          <p>í•˜ê³  ì‹¶ì€ í”„ë¡œì íŠ¸ë‚˜ ë¶„ì„í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ììœ ë¡­ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.<br>
          AIê°€ ìµœì ì˜ ë””ìì¸ ì•„ì´í…œê³¼ íƒ€ê²Ÿ í˜ë¥´ì†Œë‚˜ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤.</p>
        </div>

        <!-- ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­ -->
        <div class="chat-messages" id="chatMessages">
          <!-- AI ì´ˆê¸° ë©”ì‹œì§€ -->
          <div class="message ai">
            <div class="message-avatar">ğŸ¤–</div>
            <div class="message-content">
              <div class="message-bubble">
                ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” i know you_AIì˜ ì¶”ì²œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ğŸ¯<br><br>
                ë¶„ì„í•˜ê³  ì‹¶ì€ ì œí’ˆì´ë‚˜ ì„œë¹„ìŠ¤, ë˜ëŠ” í•´ê²°í•˜ê³  ì‹¶ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œì— ëŒ€í•´ ììœ ë¡­ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´:<br><br>
                â€¢ "20ëŒ€ ì—¬ì„±ì„ ìœ„í•œ ìƒˆë¡œìš´ ë·°í‹° ì•±ì„ ë§Œë“¤ê³  ì‹¶ì–´ìš”"<br>
                â€¢ "ì¹œí™˜ê²½ íŒ¨í‚¤ì§•ìœ¼ë¡œ ë¸Œëœë“œ ì´ë¯¸ì§€ë¥¼ ê°œì„ í•˜ê³  ì‹¶ì–´ìš”"<br>
                â€¢ "ì¤‘ì¥ë…„ì¸µì„ ìœ„í•œ ê°„í¸í•œ ëª¨ë°”ì¼ ë±…í‚¹ ì„œë¹„ìŠ¤ë¥¼ ê¸°íší•˜ê³  ìˆì–´ìš”"<br><br>
                ì–´ë–¤ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ê³„ì‹ ê°€ìš”?
              </div>
              <div class="message-time">ë°©ê¸ˆ ì „</div>
            </div>
          </div>
        </div>

        <!-- ì±„íŒ… ì…ë ¥ ì˜ì—­ -->
        <div class="chat-input-container">
          <textarea 
            class="chat-input" 
            id="chatInput" 
            placeholder="í”„ë¡œì íŠ¸ë‚˜ ë¶„ì„í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ìì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”..."
            rows="3"
          ></textarea>
          <button class="send-button" id="sendButton" onclick="sendMessage()">ì „ì†¡</button>
        </div>

        <!-- íƒ€ì´í•‘ í‘œì‹œê¸° -->
        <div class="typing-indicator" id="typingIndicator">
          <span>AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤</span>
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>

        <!-- ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸ -->
        <div class="example-prompts">
          <h4>ğŸ’¡ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸</h4>
          <div class="prompt-examples">
            <div class="prompt-example" onclick="useExamplePrompt(this)">MZì„¸ëŒ€ë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ì»¤í”¼ ë¸Œëœë“œ</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">ì¤‘ì¥ë…„ì¸µì„ ìœ„í•œ ê°„í¸í•œ ëª¨ë°”ì¼ ì•±</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">ì¹œí™˜ê²½ íŒ¨í‚¤ì§• ë””ìì¸</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">í”„ë¦¬ë¯¸ì—„ ì „ìì œí’ˆ ë¸Œëœë”©</div>
            <div class="prompt-example" onclick="useExamplePrompt(this)">ì†Œì…œì»¤ë¨¸ìŠ¤ í”Œë«í¼ UX</div>
          </div>
        </div>

        <!-- AI ì¶”ì²œ ê²°ê³¼ -->
        <div class="recommendation-result" id="recommendationResult">
          <div class="recommendation-header">
            <h2>ğŸ¯ AI ì¶”ì²œ ê²°ê³¼</h2>
            <p>ì…ë ¥í•˜ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìµœì ì˜ ì•„ì´í…œê³¼ í˜ë¥´ì†Œë‚˜ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤</p>
          </div>
          
          <div class="recommendation-grid">
            <div class="recommendation-item">
              <h3>ğŸ“± ì¶”ì²œ ì•„ì´í…œ</h3>
              <p id="recommendedItem">ìŠ¤ë§ˆíŠ¸í°</p>
              <p>ëª¨ë°”ì¼ í†µì‹  ë° ì»´í“¨íŒ… ë””ë°”ì´ìŠ¤</p>
              <p>AI ì¹´ë©”ë¼, í´ë”ë¸” ë””ìŠ¤í”Œë ˆì´, ì¹œí™˜ê²½ ì†Œì¬ ë“± í˜ì‹  ê¸°ìˆ  ì ìš©</p>
            </div>
            
            <div class="recommendation-item">
              <h3>ğŸ‘¥ ì¶”ì²œ í˜ë¥´ì†Œë‚˜</h3>
              <p id="recommendedPersonas">P1, P2, P3</p>
              <p>íŠ¸ë Œë“œ ë¯¼ê° MZ, ì‹¤ìš© ì¤‘ì‹¬ ì§ì¥ì¸, ì¹œí™˜ê²½ ê°€ì¹˜ ì§€í–¥</p>
              <p>ë‹¤ì–‘í•œ ì†Œë¹„ì¸µì˜ ë‹ˆì¦ˆë¥¼ í¬ê´„í•˜ëŠ” ì „ëµì  ì ‘ê·¼</p>
            </div>
          </div>
          
          <div class="recommendation-actions">
            <button class="action-button btn-accept" onclick="acceptRecommendation()">ì¶”ì²œ ìˆ˜ë½í•˜ê¸°</button>
            <button class="action-button btn-modify" onclick="modifyRecommendation()">ë‹¤ì‹œ ì¶”ì²œë°›ê¸°</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    let conversationHistory = [];
    
    // ë©”ì‹œì§€ ì „ì†¡
    function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (!message) return;
      
      // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
      addMessage(message, 'user');
      input.value = '';
      
      // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
      showTypingIndicator();
      
      setTimeout(() => {
        hideTypingIndicator();
        const aiResponse = generateAIResponse(message);
        addMessage(aiResponse, 'ai');
        
        // ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
        setTimeout(() => {
          showRecommendationResult(message);
        }, 1000);
      }, 2000);
    }
    
    // ë©”ì‹œì§€ ì¶”ê°€
    function addMessage(content, sender) {
      const chatMessages = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      
      const avatar = sender === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';
      const time = new Date().toLocaleTimeString('ko-KR', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
      
      messageDiv.innerHTML = `
        <div class="message-avatar">${avatar}</div>
        <div class="message-content">
          <div class="message-bubble">${content}</div>
          <div class="message-time">${time}</div>
        </div>
      `;
      
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // ëŒ€í™” ê¸°ë¡ ì €ì¥
      conversationHistory.push({ sender, content, time });
    }
    
    // AI ì‘ë‹µ ìƒì„±
    function generateAIResponse(userMessage) {
      const responses = [
        "í¥ë¯¸ë¡œìš´ í”„ë¡œì íŠ¸ë„¤ìš”! ì…ë ¥í•´ì£¼ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ë¶„ì„í•´ë³´ê² ìŠµë‹ˆë‹¤. ğŸ§ ",
        "ì¢‹ì€ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤! í•´ë‹¹ ë¶„ì•¼ì˜ ìµœì‹  íŠ¸ë Œë“œì™€ ì†Œë¹„ì ë‹ˆì¦ˆë¥¼ ê³ ë ¤í•´ì„œ ì¶”ì²œí•´ë“œë¦´ê²Œìš”. ğŸ“Š",
        "ë©‹ì§„ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤! ì‹œì¥ ë¶„ì„ê³¼ í˜ë¥´ì†Œë‚˜ ì—°êµ¬ë¥¼ í†µí•´ ìµœì ì˜ ë°©í–¥ì„ ì œì‹œí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ğŸ¯",
        "í¥ë¯¸ë¡œìš´ ì ‘ê·¼ì´ì—ìš”! í˜„ì¬ ì‹œì¥ ìƒí™©ê³¼ ì†Œë¹„ì í–‰ë™ íŒ¨í„´ì„ ë¶„ì„í•´ì„œ ì¶”ì²œí•´ë“œë¦´ê²Œìš”. ğŸ”",
        "ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤! ê²½ìŸì‚¬ ë¶„ì„ê³¼ íƒ€ê²Ÿ ê³ ê°ì˜ ë‹ˆì¦ˆë¥¼ íŒŒì•…í•´ì„œ ìµœì ì˜ ì „ëµì„ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤. ğŸ’¡"
      ];
      
      return responses[Math.floor(Math.random() * responses.length)];
    }
    
    // íƒ€ì´í•‘ í‘œì‹œê¸° í‘œì‹œ/ìˆ¨ê¹€
    function showTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'flex';
    }
    
    function hideTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'none';
    }
    
    // ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
    function showRecommendationResult(userMessage) {
      const result = document.getElementById('recommendationResult');
      result.style.display = 'block';
      
      // ì‚¬ìš©ì ë©”ì‹œì§€ì— ë”°ë¥¸ ë§ì¶¤ ì¶”ì²œ
      const recommendation = analyzeUserMessage(userMessage);
      
      document.getElementById('recommendedItem').textContent = recommendation.item;
      document.getElementById('recommendedPersonas').textContent = recommendation.personas;
      
      // ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      result.scrollIntoView({ behavior: 'smooth' });
    }
    
    // ì‚¬ìš©ì ë©”ì‹œì§€ ë¶„ì„ ë° ì¶”ì²œ
    function analyzeUserMessage(message) {
      const lowerMessage = message.toLowerCase();
      
      // ì•„ì´í…œ ì¶”ì²œ ë¡œì§
      let item = 'ìŠ¤ë§ˆíŠ¸í°';
      if (lowerMessage.includes('ì»¤í”¼') || lowerMessage.includes('ìŒë£Œ') || lowerMessage.includes('í‘¸ë“œ')) {
        item = 'ì»¤í”¼/ìŒë£Œ';
      } else if (lowerMessage.includes('íŒ¨ì…˜') || lowerMessage.includes('ì˜ë¥˜') || lowerMessage.includes('ì‹ ë°œ')) {
        item = 'íŒ¨ì…˜/ì˜ë¥˜';
      } else if (lowerMessage.includes('ë·°í‹°') || lowerMessage.includes('í™”ì¥í’ˆ') || lowerMessage.includes('ìŠ¤í‚¨ì¼€ì–´')) {
        item = 'ë·°í‹°/í™”ì¥í’ˆ';
      } else if (lowerMessage.includes('ê°€ì „') || lowerMessage.includes('ì „ì') || lowerMessage.includes('ê¸°ê¸°')) {
        item = 'ê°€ì „/ì „ìì œí’ˆ';
      } else if (lowerMessage.includes('ìë™ì°¨') || lowerMessage.includes('ì°¨ëŸ‰') || lowerMessage.includes('ëª¨ë¹Œë¦¬í‹°')) {
        item = 'ìë™ì°¨/ëª¨ë¹Œë¦¬í‹°';
      }
      
      // í˜ë¥´ì†Œë‚˜ ì¶”ì²œ ë¡œì§
      let personas = 'P1, P2, P3';
      if (lowerMessage.includes('mz') || lowerMessage.includes('20ëŒ€') || lowerMessage.includes('ì Šì€')) {
        personas = 'P1 (íŠ¸ë Œë“œ ë¯¼ê° MZ)';
      } else if (lowerMessage.includes('ì¤‘ì¥ë…„') || lowerMessage.includes('40ëŒ€') || lowerMessage.includes('ì‹¤ìš©')) {
        personas = 'P2 (ì‹¤ìš© ì¤‘ì‹¬ ì§ì¥ì¸)';
      } else if (lowerMessage.includes('ì¹œí™˜ê²½') || lowerMessage.includes('ì§€ì†ê°€ëŠ¥') || lowerMessage.includes('í™˜ê²½')) {
        personas = 'P3 (ì¹œí™˜ê²½ ê°€ì¹˜ ì§€í–¥)';
      }
      
      return { item, personas };
    }
    
    // ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©
    function useExamplePrompt(element) {
      const prompt = element.textContent;
      document.getElementById('chatInput').value = prompt;
      document.getElementById('chatInput').focus();
    }
    
    // ì¶”ì²œ ìˆ˜ë½
    function acceptRecommendation() {
      // item-selection.htmlë¡œ ì´ë™í•˜ë©´ì„œ ì¶”ì²œ ê²°ê³¼ ì „ë‹¬
      const recommendation = {
        item: document.getElementById('recommendedItem').textContent,
        personas: document.getElementById('recommendedPersonas').textContent
      };
      
      localStorage.setItem('aiRecommendation', JSON.stringify(recommendation));
      window.location.href = 'item-selection.html';
    }
    
    // ì¶”ì²œ ìˆ˜ì •
    function modifyRecommendation() {
      document.getElementById('recommendationResult').style.display = 'none';
      document.getElementById('chatInput').focus();
    }
    
    // Enter í‚¤ë¡œ ë©”ì‹œì§€ ì „ì†¡
    document.getElementById('chatInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    
    // ì…ë ¥ í•„ë“œ ë³€ê²½ ê°ì§€
    document.getElementById('chatInput').addEventListener('input', function() {
      const sendButton = document.getElementById('sendButton');
      sendButton.disabled = !this.value.trim();
    });
  </script>
</body>
</html>
