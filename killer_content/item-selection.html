<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>아이템 및 타겟 선정 - i know you_AI</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .ai-recommendation-banner {
      background: linear-gradient(135deg, #1a3a5f 0%, #2a5a8a 100%);
      border: 1px solid #3a6a9a;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      color: white;
    }
    
    .ai-banner-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .ai-banner-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 18px;
      font-weight: 600;
    }
    
    .ai-banner-close {
      background: none;
      border: none;
      color: #b7b7c7;
      font-size: 20px;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s;
    }
    
    .ai-banner-close:hover {
      color: white;
      background: rgba(255, 255, 255, 0.1);
    }
    
    .ai-recommendation-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 16px;
    }
    
    .ai-recommendation-item {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 16px;
    }
    
    .ai-recommendation-item h4 {
      color: #7bb3ff;
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .ai-recommendation-item p {
      color: #ffffff;
      font-size: 16px;
      font-weight: 500;
      margin: 0;
    }
    
    .ai-banner-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .btn-ai-modify {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .btn-ai-modify:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .btn-ai-accept {
      background: #50c878;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .btn-ai-accept:hover {
      background: #3cb371;
      transform: translateY(-1px);
    }
    
    .ai-recommendation-note {
      text-align: center;
      font-size: 12px;
      color: #b7b7c7;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    @media (max-width: 768px) {
      .ai-recommendation-content {
        grid-template-columns: 1fr;
      }
      
      .ai-banner-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- 좌측 메뉴 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>i know you_AI</h3>
        <p>비즈니스 전략 지원 AI</p>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section current-step-section">
          <h4>현재 단계: 리서치</h4>
          <div class="step-progress-indicator">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 33%"></div>
            </div>
            <span class="progress-text">1/3 단계 완료</span>
          </div>
          <ul>
            <li><a href="index.html" class="nav-item" data-section="main">
              메인 대시보드
            </a></li>
            <li><a href="ai-recommendation.html" class="nav-item" data-section="ai-recommendation">
              AI 추천
            </a></li>
            <li><a href="item-selection.html" class="nav-item active" data-section="item-selection">
              아이템 및 타겟 선정
              <span class="nav-status current">진행 중</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section next-step-section">
          <h4>다음 단계: 아이데이션</h4>
          <p class="next-step-desc">리서치 결과를 바탕으로 창의적인 아이디어를 생성합니다</p>
          <ul>
            <li><a href="index.html#ideation" class="nav-item" data-section="ideation">
              아이데이션
              <span class="nav-status locked">잠김</span>
            </a></li>
          </ul>
        </div>
        
        <div class="nav-section future-step-section">
          <h4>향후 단계</h4>
          <p class="next-step-desc">아이데이션 결과를 바탕으로 컨셉을 개발하고 평가합니다</p>
          <ul>
            <li><a href="index.html#concept-development" class="nav-item" data-section="concept-development">
              컨셉 개발
              <span class="nav-status locked">잠김</span>
            </a></li>
            <li><a href="index.html#evaluation-feedback" class="nav-item" data-section="evaluation-feedback">
              평가 및 피드백
              <span class="nav-status locked">잠김</span>
            </a></li>
          </ul>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">홍</div>
          <div class="user-details">
            <div class="user-name">홍길동</div>
            <div class="user-status premium">Premium</div>
          </div>
        </div>
        <div class="premium-service-notice">
          <p>홍길동 님은 현재 Premium 서비스를 이용중입니다.</p>
        </div>
      </div>
    </aside>

    <!-- 메인 콘텐츠 -->
    <main class="main-content">
      <div class="container">
        <header class="selection-header">
          <div class="header-content">
            <div>
              <h1>📋 아이템 및 타겟 선정</h1>
              <p>분석할 제품 카테고리와 타겟 페르소나를 선택해주세요</p>
            </div>
            <div class="header-actions">
              <button class="button secondary" id="btnReset">초기화</button>
              <button class="button primary" id="btnConfirm" disabled>선정 완료</button>
            </div>
          </div>
        </header>

        <!-- AI 추천 배너 -->
        <div class="ai-recommendation-banner" id="aiRecommendationBanner" style="display: none;">
          <div class="ai-banner-header">
            <div class="ai-banner-title">
              🤖 AI 추천 결과
              <span style="font-size: 14px; font-weight: 400; opacity: 0.8;">| AI가 분석한 최적의 선택</span>
            </div>
            <button class="ai-banner-close" onclick="closeAiBanner()">&times;</button>
          </div>
          
          <div class="ai-recommendation-content">
            <div class="ai-recommendation-item">
              <h4>📱 추천 아이템</h4>
              <p id="aiRecommendedItem">스마트폰</p>
            </div>
            <div class="ai-recommendation-item">
              <h4>👥 추천 페르소나</h4>
              <p id="aiRecommendedPersonas">P1, P2, P3</p>
            </div>
          </div>
          
          <div class="ai-banner-actions">
            <button class="btn-ai-modify" onclick="goToAiRecommendation()">AI 추천 다시받기</button>
            <button class="btn-ai-accept" onclick="acceptAiRecommendation()">AI 추천 적용하기</button>
          </div>
          
          <div class="ai-recommendation-note">
            💡 AI가 입력하신 프로젝트 내용을 분석하여 최적의 아이템과 페르소나를 추천했습니다
          </div>
        </div>

        <!-- ===== 아이템 & 타겟 선정 ===== -->
        <div class="grid cols-2">
          <!-- 아이템 선택 -->
          <section class="card" id="item-selection">
            <h2>📱 아이템 선택</h2>
            <div class="item-selection-content">
              <div class="selected-item">
                <div class="item-icon">📱</div>
                <div class="item-info">
                  <h3>스마트폰</h3>
                  <p>모바일 통신 및 컴퓨팅 디바이스</p>
                  <span class="item-status selected">선택됨</span>
                </div>
              </div>
              <div class="item-options">
                <h4>다른 아이템 선택</h4>
                <div class="option-grid">
                  <button class="item-option selected" data-item="smartphone">📱 스마트폰</button>
                  <button class="item-option" data-item="laptop">💻 노트북</button>
                  <button class="item-option" data-item="tablet">📱 태블릿</button>
                  <button class="item-option" data-item="headphone">🎧 헤드폰</button>
                  <button class="item-option" data-item="smartwatch">⌚ 스마트워치</button>
                  <button class="item-option" data-item="camera">📷 카메라</button>
                </div>
              </div>
            </div>
          </section>

          <!-- 타겟 페르소나 선정 -->
          <section class="card" id="persona-selection">
            <h2>👥 타겟 페르소나 선정</h2>
            <div class="persona-selection-content">
              <div class="selected-personas">
                <h4>선정된 페르소나</h4>
                <div class="persona-tags">
                  <span class="persona-tag selected" data-persona="P1">P1 · 트렌드 민감 MZ</span>
                  <span class="persona-tag selected" data-persona="P2">P2 · 실용 중심 직장인</span>
                  <span class="persona-tag selected" data-persona="P3">P3 · 친환경 가치 지향</span>
                </div>
              </div>
              <div class="persona-details">
                <h4>페르소나 상세 정보</h4>
                <div class="persona-cards">
                  <div class="persona-card-mini">
                    <div class="persona-header-mini">
                      <div class="persona-avatar-mini">P1</div>
                      <div class="persona-info-mini">
                        <h5>트렌드 민감 MZ</h5>
                        <p>20-30대, 새로운 기술과 트렌드에 민감</p>
                      </div>
                    </div>
                  </div>
                  <div class="persona-card-mini">
                    <div class="persona-header-mini">
                      <div class="persona-avatar-mini">P2</div>
                      <div class="persona-info-mini">
                        <h5>실용 중심 직장인</h5>
                        <p>30-40대, 업무 효율성과 실용성 중시</p>
                      </div>
                    </div>
                  </div>
                  <div class="persona-card-mini">
                    <div class="persona-header-mini">
                      <div class="persona-avatar-mini">P3</div>
                      <div class="persona-info-mini">
                        <h5>친환경 가치 지향</h5>
                        <p>모든 연령대, 환경 보호와 지속가능성 중시</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- 선정 요약 및 확인 -->
        <section class="card selection-summary">
          <h2>📋 선정 요약</h2>
          <div class="summary-content">
            <div class="summary-item">
              <h4>선택된 아이템</h4>
              <div class="summary-value" id="summaryItem">스마트폰</div>
            </div>
            <div class="summary-item">
              <h4>선정된 페르소나</h4>
              <div class="summary-value" id="summaryPersonas">P1, P2, P3</div>
            </div>
            <div class="summary-item">
              <h4>분석 범위</h4>
              <div class="summary-value" id="summaryScope">스마트폰 시장의 트렌드 민감 MZ, 실용 중심 직장인, 친환경 가치 지향 소비자 분석</div>
            </div>
          </div>
          <div class="summary-actions">
            <button class="button secondary" id="btnBack">뒤로 가기</button>
            <button class="button primary" id="btnStartAnalysis">분석 시작하기</button>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- JavaScript 파일들을 순서대로 로드 -->
  <script src="app.js"></script>
  
  <script>
    // 페이지 로드 시 AI 추천 결과 확인
    document.addEventListener('DOMContentLoaded', function() {
      checkAiRecommendation();
    });
    
    // AI 추천 결과 확인
    function checkAiRecommendation() {
      const aiRecommendation = localStorage.getItem('aiRecommendation');
      if (aiRecommendation) {
        try {
          const recommendation = JSON.parse(aiRecommendation);
          showAiRecommendationBanner(recommendation);
        } catch (e) {
          console.error('AI 추천 데이터 파싱 오류:', e);
        }
      }
    }
    
    // AI 추천 배너 표시
    function showAiRecommendationBanner(recommendation) {
      const banner = document.getElementById('aiRecommendationBanner');
      const itemElement = document.getElementById('aiRecommendedItem');
      const personasElement = document.getElementById('aiRecommendedPersonas');
      
      if (banner && itemElement && personasElement) {
        itemElement.textContent = recommendation.item;
        personasElement.textContent = recommendation.personas;
        banner.style.display = 'block';
      }
    }
    
    // AI 추천 배너 닫기
    function closeAiBanner() {
      const banner = document.getElementById('aiRecommendationBanner');
      if (banner) {
        banner.style.display = 'none';
      }
    }
    
    // AI 추천 페이지로 이동
    function goToAiRecommendation() {
      window.location.href = 'ai-recommendation.html';
    }
    
    // AI 추천 적용
    function acceptAiRecommendation() {
      const aiRecommendation = localStorage.getItem('aiRecommendation');
      if (aiRecommendation) {
        try {
          const recommendation = JSON.parse(aiRecommendation);
          
          // 아이템 선택 적용
          applyAiItemRecommendation(recommendation.item);
          
          // 페르소나 선택 적용
          applyAiPersonaRecommendation(recommendation.personas);
          
          // 배너 닫기
          closeAiBanner();
          
          // 성공 메시지
          alert('AI 추천이 성공적으로 적용되었습니다!');
          
        } catch (e) {
          console.error('AI 추천 적용 오류:', e);
          alert('AI 추천 적용 중 오류가 발생했습니다.');
        }
      }
    }
    
    // AI 추천 아이템 적용
    function applyAiItemRecommendation(item) {
      // 아이템 옵션 버튼들 찾기
      const itemOptions = document.querySelectorAll('.item-option');
      
      // 기존 선택 해제
      itemOptions.forEach(option => {
        option.classList.remove('selected');
      });
      
      // AI 추천 아이템에 해당하는 버튼 찾기 및 선택
      let targetItem = 'smartphone'; // 기본값
      
      if (item.includes('커피') || item.includes('음료')) {
        targetItem = 'beverage';
      } else if (item.includes('패션') || item.includes('의류')) {
        targetItem = 'fashion';
      } else if (item.includes('뷰티') || item.includes('화장품')) {
        targetItem = 'beauty';
      } else if (item.includes('가전') || item.includes('전자')) {
        targetItem = 'electronics';
      } else if (item.includes('자동차') || item.includes('모빌리티')) {
        targetItem = 'automotive';
      }
      
      // 해당 아이템 버튼 선택
      const targetOption = document.querySelector(`[data-item="${targetItem}"]`);
      if (targetOption) {
        targetOption.classList.add('selected');
        
        // 선택된 아이템 정보 업데이트
        const selectedItem = document.querySelector('.selected-item .item-info h3');
        if (selectedItem) {
          selectedItem.textContent = targetOption.textContent.replace(/[📱💻📱🎧⌚📷]/, '').trim();
        }
      }
    }
    
    // AI 추천 페르소나 적용
    function applyAiPersonaRecommendation(personas) {
      // 페르소나 태그들 찾기
      const personaTags = document.querySelectorAll('.persona-tag');
      
      // 기존 선택 해제
      personaTags.forEach(tag => {
        tag.classList.remove('selected');
      });
      
      // AI 추천 페르소나에 해당하는 태그 선택
      if (personas.includes('P1')) {
        const p1Tag = document.querySelector('[data-persona="P1"]');
        if (p1Tag) p1Tag.classList.add('selected');
      }
      
      if (personas.includes('P2')) {
        const p2Tag = document.querySelector('[data-persona="P2"]');
        if (p2Tag) p2Tag.classList.add('selected');
      }
      
      if (personas.includes('P3')) {
        const p3Tag = document.querySelector('[data-persona="P3"]');
        if (p3Tag) p3Tag.classList.add('selected');
      }
    }
  </script>
</body>
</html>
