/* 반응형 미디어 쿼리 */

/* ===== 대형 데스크탑 (1400px+) ===== */
@media (min-width: 1400px) {
  .main-container {
    max-width: var(--container-2xl);
  }
  
  .tool-mode.active {
    gap: var(--spacing-xxl);
  }
  
  .tool-sidebar {
    width: 320px;
  }
  
  .metrics-grid {
    grid-template-columns: repeat(4, 1fr);
  }
  
  .guide-steps {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* ===== 데스크탑 (1200px ~ 1399px) ===== */
@media (max-width: 1399px) and (min-width: 1200px) {
  .main-container {
    max-width: var(--container-xl);
  }
  
  .header-content {
    gap: var(--spacing-lg);
  }
  
  .header-mode-selector {
    max-width: 350px;
  }
}

/* ===== 태블릿 (1024px ~ 1199px) ===== */
@media (max-width: 1199px) and (min-width: 1024px) {
  .main-container {
    max-width: var(--container-lg);
    padding-left: var(--spacing-lg);
    padding-right: var(--spacing-lg);
  }
  
  .hybrid-mode.active {
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
  }
  
  .hybrid-panel {
    height: 400px;
    min-height: 400px;
  }
  
  .tool-mode.active {
    flex-direction: column;
    gap: var(--spacing-lg);
  }
  
  .tool-sidebar {
    width: 100%;
    position: relative;
    top: auto;
    padding: var(--spacing-lg);
  }
  
  .sidebar-section {
    margin-bottom: var(--spacing-lg);
  }
  
  .metrics-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .impact-metrics {
    grid-template-columns: 1fr;
  }
  
  .persona-details {
    grid-template-columns: 1fr;
  }
  
  .scenario-grid {
    grid-template-columns: 1fr;
  }
  
  .settings-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ===== 태블릿 작은 화면 (768px ~ 1023px) ===== */
@media (max-width: 1023px) and (min-width: 768px) {
  .header {
    padding: var(--spacing-md);
  }
  
  .header-content {
    flex-direction: column;
    gap: var(--spacing-md);
    align-items: stretch;
  }
  
  .logo {
    text-align: center;
    order: 0;
  }
  
  .header-mode-selector {
    order: 1;
    max-width: 100%;
  }
  
  .header-nav {
    order: 2;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-sm);
  }
  
  .main-container {
    padding-top: 140px; /* 헤더 높이 증가 고려 */
  }
  
  .card {
    padding: var(--spacing-lg);
  }
  
  .card-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm);
  }
  
  .metrics-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .persona-header {
    flex-direction: column;
    text-align: center;
    gap: var(--spacing-sm);
  }
  
  .persona-avatar {
    margin: 0 auto var(--spacing-sm);
  }
  
  .map-container {
    height: 250px;
  }
  
  .competitor {
    width: 35px;
    height: 35px;
    font-size: 0.7rem;
  }
  
  .guide-steps {
    grid-template-columns: 1fr;
  }
  
  .projects-grid {
    gap: var(--spacing-sm);
  }
  
  .project-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-sm);
  }
}

/* ===== 모바일 (480px ~ 767px) ===== */
@media (max-width: 767px) {
  .main-container {
    padding: 100px var(--spacing-sm) var(--spacing-lg);
  }
  
  .header {
    padding: var(--spacing-md) var(--spacing-sm);
    height: auto;
    min-height: var(--header-height);
  }
  
  .header-content {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .logo {
    font-size: var(--font-size-lg);
    order: 0;
  }
  
  .header-mode-selector {
    order: 1;
    flex-direction: column;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs);
  }
  
  .mode-nav-item {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
    justify-content: flex-start;
  }
  
  .mode-nav-icon {
    font-size: var(--font-size-sm);
  }
  
  .header-nav {
    order: 2;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-xs);
  }
  
  .nav-item {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-sm);
    flex: 1;
    text-align: center;
    min-width: 0;
  }
  
  /* 카드 스타일 조정 */
  .card {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
  }
  
  .card-title {
    font-size: var(--font-size-lg);
  }
  
  .card-subtitle {
    font-size: var(--font-size-xs);
  }
  
  /* 메트릭 그리드 */
  .metrics-grid {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .metric-card {
    padding: var(--spacing-sm);
  }
  
  .metric-value {
    font-size: var(--font-size-xl);
  }
  
  /* 폼 요소 */
  .form-group {
    margin-bottom: var(--spacing-md);
  }
  
  .form-input,
  .form-select,
  .form-textarea {
    padding: var(--spacing-sm);
    font-size: var(--font-size-base);
  }
  
  /* 버튼 */
  .btn {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
    width: 100%;
    justify-content: center;
  }
  
  .btn-sm {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
    width: auto;
  }
  
  /* 페르소나 카드 */
  .persona-card {
    padding: var(--spacing-md);
  }
  
  .persona-header {
    flex-direction: column;
    text-align: center;
    gap: var(--spacing-sm);
  }
  
  .persona-avatar {
    width: 40px;
    height: 40px;
    margin: 0 auto;
  }
  
  .persona-details {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .detail-card {
    padding: var(--spacing-sm);
  }
  
  /* 포지셔닝 맵 */
  .map-container {
    height: 200px;
  }
  
  .competitor {
    width: 30px;
    height: 30px;
    font-size: 0.6rem;
  }
  
  .map-axis {
    font-size: 0.7rem;
  }
  
  /* 시나리오 그리드 */
  .scenario-grid {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .scenario-card {
    padding: var(--spacing-sm);
  }
  
  /* 시뮬레이션 컨트롤 */
  .control-group {
    flex-direction: column;
    align-items: stretch;
    gap: var(--spacing-sm);
  }
  
  .control-group label {
    min-width: auto;
  }
  
  /* 임팩트 메트릭 */
  .impact-metrics {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  .impact-card {
    padding: var(--spacing-md);
  }
  
  .impact-value {
    font-size: var(--font-size-xl);
  }
  
  /* 인사이트 리스트 */
  .insight-item {
    flex-direction: column;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm);
  }
  
  .insight-priority {
    align-self: flex-start;
  }
  
  /* 성과 메트릭 */
  .performance-metrics {
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
  }
  
  /* 차트 */
  .tracking-chart {
    padding: var(--spacing-md);
  }
  
  .chart-placeholder {
    height: 150px;
  }
  
  /* 프로젝트 카드 */
  .project-card {
    padding: var(--spacing-md);
  }
  
  .project-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-xs);
  }
  
  /* 설정 */
  .settings-grid {
    grid-template-columns: 1fr;
  }
  
  .settings-actions {
    flex-direction: column;
    gap: var(--spacing-sm);
  }
  
  .setting-item {
    padding: var(--spacing-sm);
  }
  
  /* 도움말 박스 */
  .help-box {
    padding: var(--spacing-md);
    margin: var(--spacing-md) 0;
  }
  
  .help-box h4 {
    font-size: var(--font-size-sm);
  }
  
  .help-box p {
    font-size: var(--font-size-sm);
  }
  
  /* 사이드바 (모바일에서는 상단으로) */
  .tool-sidebar {
    padding: var(--spacing-md);
  }
  
  .sidebar-section {
    margin-bottom: var(--spacing-md);
  }
  
  .sidebar-section h3 {
    font-size: var(--font-size-sm);
  }
  
  .sidebar-item {
    padding: var(--spacing-sm);
    font-size: var(--font-size-sm);
  }
  
  .sidebar-item .icon {
    font-size: var(--font-size-base);
  }
  
  /* 연결 상태 */
  .connection-status {
    bottom: var(--spacing-md);
    right: var(--spacing-sm);
    left: var(--spacing-sm);
    text-align: center;
    font-size: var(--font-size-xs);
  }
  
  /* 토스트 */
  .toast {
    top: var(--spacing-md);
    right: var(--spacing-sm);
    left: var(--spacing-sm);
    max-width: none;
  }
  
  /* 체크박스 그룹 */
  .checkbox-group {
    gap: var(--spacing-xs);
  }
  
  .checkbox-item {
    padding: var(--spacing-xs);
    font-size: var(--font-size-sm);
  }
}

/* ===== 작은 모바일 (320px ~ 479px) ===== */
@media (max-width: 479px) {
  .main-container {
    padding: 80px var(--spacing-xs) var(--spacing-md);
  }
  
  .header {
    padding: var(--spacing-sm) var(--spacing-xs);
  }
  
  .logo {
    font-size: var(--font-size-base);
  }
  
  .mode-nav-item {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
  }
  
  .nav-item {
    padding: var(--spacing-xs);
    font-size: var(--font-size-xs);
  }
  
  .card {
    padding: var(--spacing-sm);
  }
  
  .card-title {
    font-size: var(--font-size-base);
  }
  
  .metric-value {
    font-size: var(--font-size-lg);
  }
  
  .impact-value {
    font-size: var(--font-size-lg);
  }
  
  .persona-avatar {
    width: 35px;
    height: 35px;
    font-size: var(--font-size-sm);
  }
  
  .competitor {
    width: 25px;
    height: 25px;
    font-size: 0.5rem;
  }
  
  .map-container {
    height: 180px;
  }
  
  .chart-placeholder {
    height: 120px;
  }
  
  .help-box {
    padding: var(--spacing-sm);
  }
  
  .connection-status {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: 0.7rem;
  }
}

/* ===== 터치 디바이스 최적화 ===== */
@media (hover: none) and (pointer: coarse) {
  .btn,
  .sidebar-item,
  .nav-item,
  .mode-nav-item,
  .project-card,
  .setting-item {
    min-height: 44px; /* 터치 타겟 최소 크기 */
  }
  
  .checkbox-item {
    min-height: 40px;
    padding: var(--spacing-sm);
  }
  
  .form-input,
  .form-select,
  .form-textarea {
    min-height: 44px;
    font-size: 16px; /* iOS 줌 방지 */
  }
  
  /* 호버 효과 제거 */
  .btn:hover,
  .card:hover,
  .project-card:hover,
  .sidebar-item:hover,
  .nav-item:hover,
  .mode-nav-item:hover {
    transform: none;
  }
}

/* ===== 다크 모드 대응 ===== */
@media (prefers-color-scheme: dark) {
  /* 이미 다크 테마이므로 추가 조정 없음 */
}

/* ===== 고대비 모드 ===== */
@media (prefers-contrast: high) {
  .card,
  .btn,
  .form-input,
  .form-select,
  .form-textarea {
    border-width: 2px;
  }
  
  .btn-primary {
    background: #0066cc;
    border: 2px solid #004499;
  }
  
  .text-primary {
    color: #ffffff;
  }
  
  .text-secondary {
    color: #cccccc;
  }
}

/* ===== 애니메이션 감소 모드 ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .progress-fill::after {
    display: none;
  }
}

/* ===== 인쇄 스타일 ===== */
@media print {
  .header,
  .connection-status,
  .toast,
  .btn,
  .header-mode-selector,
  .header-nav {
    display: none !important;
  }
  
  .main-container {
    padding: 0;
    max-width: none;
  }
  
  .card {
    border: 1px solid #000;
    background: white;
    color: black;
    break-inside: avoid;
    margin-bottom: 1rem;
  }
  
  .page-content {
    display: block !important;
  }
  
  .tool-mode.active {
    display: block !important;
    flex-direction: column;
  }
  
  .tool-sidebar {
    display: none;
  }
  
  .tool-content {
    background: white;
    color: black;
  }
}

/* ===== 가로 모드 (모바일/태블릿) ===== */
@media (max-width: 1023px) and (orientation: landscape) {
  .header-content {
    flex-direction: row;
    gap: var(--spacing-sm);
  }
  
  .header-mode-selector {
    flex-direction: row;
    max-width: 300px;
  }
  
  .mode-nav-item {
    padding: var(--spacing-xs) var(--spacing-sm);
  }
  
  .main-container {
    padding-top: 100px;
  }
  
  .hybrid-mode.active {
    grid-template-columns: 1fr 1fr;
  }
  
  .hybrid-panel {
    height: 300px;
  }
  
  .metrics-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ===== 접근성 개선 ===== */
@media (prefers-reduced-transparency: reduce) {
  .header {
    background: var(--bg-primary);
    backdrop-filter: none;
  }
  
  .card,
  .btn,
  .form-input,
  .form-select,
  .form-textarea {
    background: var(--bg-secondary);
  }
}

/* ===== 폰트 크기 조정 ===== */
@media (max-width: 767px) {
  html {
    font-size: 14px; /* 기본 16px에서 14px로 축소 */
  }
}

@media (max-width: 479px) {
  html {
    font-size: 13px; /* 더 작은 화면에서 13px로 축소 */
  }
}