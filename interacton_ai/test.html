<script>
        let isTyping = false;
        let currentSetupStep = 1;
        let selectedPersona = '';
        let selectedProductName = '';
        let selectedProductDesc = '';
        let selectedGoal = '';

        // Setup functions
        function selectPersona(persona) {
            // Remove previous selection
            document.querySelectorAll('.persona-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            event.currentTarget.classList.add('selected');
            selectedPersona = persona;
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }

        function selectProductExample(name, description) {
            // Ïù¥Ï†Ñ ÏÑ†ÌÉù Ï†úÍ±∞
            document.querySelectorAll('.example-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // ÌÅ¥Î¶≠Îêú Ïπ¥Îìú ÏÑ†ÌÉù
            event.currentTarget.classList.add('selected');
            
            // ÏûÖÎ†• ÌïÑÎìú ÏóÖÎç∞Ïù¥Ìä∏
            const productNameInput = document.getElementById('productName');
            const productDescInput = document.getElementById('productDescription');
            
            if (productNameInput) {
                productNameInput.value = name;
            }
            if (productDescInput) {
                productDescInput.value = description;
            }
            
            selectedProductName = name;
            selectedProductDesc = description;
            
            // Enable next button
            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                nextBtn.disabled = false;
            }
        }

        function selectGoal(goal) {
            // Remove previous selection
            document.querySelectorAll('.goal-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            event.currentTarget.classList.add('selected');
            selectedGoal = goal;
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').textContent = 'ÌîÑÎ°úÏ†ùÌä∏ ÏãúÏûë';
        }

        function nextStep() {
            if (currentSetupStep === 1) {
                if (!selectedPersona) return;
                
                // Update progress
                document.getElementById('indicator1').classList.remove('active');
                document.getElementById('indicator1').classList.add('completed');
                document.getElementById('indicator2').classList.add('active');
                
                // Switch steps
                document.getElementById('step1').classList.remove('active');
                document.getElementById('step2').classList.add('active');
                
                currentSetupStep = 2;
                document.getElementById('backBtn').disabled = false;
                document.getElementById('nextBtn').disabled = true;
                
            } else if (currentSetupStep === 2) {
                selectedProductName = document.getElementById('productName').value.trim();
                selectedProductDesc = document.getElementById('productDescription').value.trim();
                
                if (!selectedProductName) {
                    alert('Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }
                
                // Update progress
                document.getElementById('indicator2').classList.remove('active');
                document.getElementById('indicator2').classList.add('completed');
                document.getElementById('indicator3').classList.add('active');
                
                // Switch steps
                document.getElementById('step2').classList.remove('active');
                document.getElementById('step3').classList.add('active');
                
                currentSetupStep = 3;
                document.getElementById('nextBtn').disabled = true;
                
            } else if (currentSetupStep === 3) {
                if (!selectedGoal) return;
                
                // Complete setup
                completeSetup();
            }
        }

        function previousStep() {
            if (currentSetupStep === 2) {
                // Update progress
                document.getElementById('indicator2').classList.remove('active');
                document.getElementById('indicator1').classList.remove('completed');
                document.getElementById('indicator1').classList.add('active');
                
                // Switch steps
                document.getElementById('step2').classList.remove('active');
                document.getElementById('step1').classList.add('active');
                
                currentSetupStep = 1;
                document.getElementById('backBtn').disabled = true;
                document.getElementById('nextBtn').disabled = selectedPersona ? false : true;
                
            } else if (currentSetupStep === 3) {
                // Update progress
                document.getElementById('indicator3').classList.remove('active');
                document.getElementById('indicator2').classList.remove('completed');
                document.getElementById('indicator2').classList.add('active');
                
                // Switch steps
                document.getElementById('step3').classList.remove('active');
                document.getElementById('step2').classList.add('active');
                
                currentSetupStep = 2;
                document.getElementById('nextBtn').disabled = false;
                document.getElementById('nextBtn').textContent = 'Îã§Ïùå';
            }
        }

        function skipSetup() {
            // Set default values
            selectedPersona = 'senior';
            selectedProductName = 'Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà';
            selectedProductDesc = 'Ïö¥Îèô Ï∂îÏ†ÅÍ≥º Í±¥Í∞ï Í¥ÄÎ¶¨Î•º ÏúÑÌïú Ïõ®Ïñ¥Îü¨Î∏î Ï†úÌíà';
            selectedGoal = 'ÏÉàÎ°úÏö¥ Ï†úÌíà ÎßåÎì§Í∏∞';
            
            completeSetup();
        }

        function completeSetup() {
            // Hide setup overlay
            const overlay = document.getElementById('setupOverlay');
            if (overlay) {
                overlay.classList.add('hidden');
            }
            
            // Update project info in header
            const projectTitle = document.querySelector('.project-details h1');
            if (projectTitle) {
                projectTitle.textContent = selectedProductName;
            }
            
            const personaNames = {
                'junior': 'Ï£ºÎãàÏñ¥ ÎîîÏûêÏù¥ÎÑà',
                'senior': 'ÏãúÎãàÏñ¥ ÎîîÏûêÏù¥ÎÑà',
                'pm': 'Ï†úÌíà Í∏∞ÌöçÏûê'
            };
            
            const projectMeta = document.querySelector('.project-meta');
            if (projectMeta) {
                projectMeta.innerHTML = `
                    <span class="project-status">ÏÑ§Ï†ï ÏôÑÎ£å</span>
                    <span>‚Ä¢</span>
                    <span>${personaNames[selectedPersona]}</span>
                    <span>‚Ä¢</span>
                    <span>ÏãúÏûë: ${new Date().toLocaleDateString('ko-KR')}</span>
                `;
            }
            
            // Start initial conversation
            setTimeout(() => {
                startInitialConversation();
            }, 1000);
        }

        function startInitialConversation() {
            const personaGreetings = {
                'junior': `ÏïàÎÖïÌïòÏÑ∏Ïöî! ${selectedProductName} ÌîÑÎ°úÏ†ùÌä∏Î•º Ìï®Íªò ÏßÑÌñâÌïòÍ≤å ÎêòÏñ¥ Í∏∞ÏÅ©ÎãàÎã§. üòä 

                ${selectedGoal}ÏùÑ Î™©ÌëúÎ°ú, Í∏∞Ï¥àÎ∂ÄÌÑ∞ Ï∞®Í∑ºÏ∞®Í∑º Î∞∞ÏõåÍ∞ÄÎ©∞ ÏßÑÌñâÌï¥Î≥¥Í≤†ÏäµÎãàÎã§. Í∂ÅÍ∏àÌïú Ï†êÏù¥ ÏûàÏúºÎ©¥ Ïñ∏Ï†úÎì† Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî!`,
                
                'senior': `${selectedProductName} ÌîÑÎ°úÏ†ùÌä∏ ÌÇ•Ïò§ÌîÑÎ•º ÏãúÏûëÌïòÍ≤†ÏäµÎãàÎã§.

                ${selectedGoal}ÏùÑ ÏúÑÌïú Ï†ÑÎûµÏ†Å Ï†ëÍ∑ºÏùÑ ÌÜµÌï¥ ÎπÑÏ¶àÎãàÏä§ ÏûÑÌå©Ìä∏Î•º ÏµúÎåÄÌôîÌïòÎäî Î∞©Ìñ•ÏúºÎ°ú ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.`,
                
                'pm': `${selectedProductName} ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ïÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.

                ${selectedGoal}Ïùò Ìö®Ïú®Ï†ÅÏù∏ Ïã§ÌñâÏùÑ ÏúÑÌï¥ Ïö∞ÏÑ†ÏàúÏúÑÏôÄ ÏùºÏ†ïÏùÑ Ï§ëÏã¨ÏúºÎ°ú Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.`
            };

            // Clear existing messages
            const chatContainer = document.getElementById('chatMessages');
            if (chatContainer) {
                chatContainer.innerHTML = '';
            }
            
            // Add initial AI message
            addAIMessageWithDetailedInsight(
                personaGreetings[selectedPersona] || 'ÌîÑÎ°úÏ†ùÌä∏Î•º ÏãúÏûëÌï©ÎãàÎã§!',
                `ÌòÑÏû¨ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 45% ÏÑ±Ïû•ÌïòÍ≥† ÏûàÏúºÎ©∞, ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§ Í∏∞Îä•Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌñàÏäµÎãàÎã§. Ï£ºÏöî ÌÉÄÍ≤üÏ∏µÏù∏ Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà(25-35ÏÑ∏)Îäî Ïâ¨Ïö¥ ÏãúÏûëÍ≥º ÏÑ±Ï∑®Í∞êÏùÑ Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌï©ÎãàÎã§.`,
                [
                    {value: '45%', label: 'AI Ìó¨Ïä§ÏºÄÏñ¥ ÏÑ±Ïû•Î•†'},
                    {value: '89%', label: 'Ïâ¨Ïö¥ ÏãúÏûë ÏÑ†Ìò∏ÎèÑ'},
                    {value: '76%', label: 'ÏÑ±Ï∑®Í∞ê Ï§ëÏöîÎèÑ'}
                ],
                [
                    'üå± Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà (25-35ÏÑ∏) - ÏãúÏûëÌïòÎäî ÏßÅÏû•Ïù∏ ‚Ä¢ Ïâ¨Ïö¥ Ï†ëÍ∑º ÏÑ†Ìò∏',
                    'üéØ Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥ (50-65ÏÑ∏) - Í±¥Í∞ï Í¥ÄÎ¶¨ Ï§ëÏã¨ ‚Ä¢ Ï†ïÌôïÏÑ± Ï§ëÏãú',
                    'üí™ ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ (20-40ÏÑ∏) - Ïö¥Îèô Ïï†Ìò∏Í∞Ä ‚Ä¢ Í≥†Í∏â Í∏∞Îä• ÏÑ†Ìò∏'
                ]
            );
            
            // Update initial progress to 50%
            updateProgress(50);
        }

        // Monitor product input changes
        document.addEventListener('DOMContentLoaded', function() {
            const productNameInput = document.getElementById('productName');
            const productDescInput = document.getElementById('productDescription');
            
            function checkProductInputs() {
                const name = productNameInput.value.trim();
                document.getElementById('nextBtn').disabled = !name;
            }
            
            if (productNameInput) {
                productNameInput.addEventListener('input', checkProductInputs);
            }
            if (productDescInput) {
                productDescInput.addEventListener('input', checkProductInputs);
            }
        });

        // Toggle RAG sections
        function toggleSection(sectionId) {
            const content = document.getElementById(`${sectionId}-content`);
            const chevron = document.getElementById(`${sectionId}-chevron`);
            
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                chevron.textContent = '‚ñº';
                chevron.classList.add('expanded');
            } else {
                content.classList.add('collapsed');
                chevron.textContent = '‚ñ∂';
                chevron.classList.remove('expanded');
            }
        }

        // Target selection
        function selectTarget(target) {
            // Visual feedback
            event.target.classList.add('selected');
            
            // Disable other buttons
            const buttons = event.target.parentNode.querySelectorAll('.choice-btn');
            buttons.forEach(btn => {
                if (btn !== event.target) {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                }
            });

            // Send user message
            setTimeout(() => {
                addUserMessage(`${target} ÌÉÄÍ≤üÏúºÎ°ú ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.`);
                
                setTimeout(() => {
                    // Update progress to 65%
                    updateProgress(65);
                    
                    // AI response with RAG data
                    const responses = {
                        'Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà': {
                            message: `Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ 10Î∂Ñ ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Í∞ÑÎã®Ìïú Ïö¥ÎèôÏùÑ ÏÑ†Ìò∏ÌïòÎ©∞, ÌèâÍ∑† 3Ï£º ÏãúÏ†êÏóêÏÑú Ìè¨Í∏∞Ïú®Ïù¥ ÎÜíÏïÑ Ï¥àÍ∏∞ ÏäµÍ¥Ä ÌòïÏÑ±Ïù¥ Îß§Ïö∞ Ï§ëÏöîÌï©ÎãàÎã§. ÏÑ±Ï∑®Í∞êÏùÑ ÌÜµÌïú ÎèôÍ∏∞Î∂ÄÏó¨Í∞Ä ÏßÄÏÜç ÏÇ¨Ïö©Ïùò ÌïµÏã¨ ÏöîÏÜåÏûÖÎãàÎã§.',
                            metrics: [
                                {value: '10Î∂Ñ', label: 'ÏÑ†Ìò∏ Ïö¥Îèô ÏãúÍ∞Ñ'},
                                {value: '68%', label: 'ÏäµÍ¥Ä ÌòïÏÑ± ÎãàÏ¶à'},
                                {value: '3Ï£º', label: 'ÌèâÍ∑† Ìè¨Í∏∞ ÏãúÏ†ê'}
                            ],
                            choices: [
                                'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú - 10Î∂Ñ ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Ï¥àÎ≥¥ÏûêÏö© Î£®Ìã¥',
                                'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏ - ÏûëÏùÄ Î™©ÌëúÏôÄ Î≥¥ÏÉÅ ÏãúÏä§ÌÖúÏúºÎ°ú ÏßÄÏÜçÏÑ± ÌôïÎ≥¥', 
                                'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ - Ìï®ÍªòÌïòÎäî ÎèôÍ∏∞Î∂ÄÏó¨ÏôÄ ÏÜåÏÖú Í∏∞Îä•'
                            ]
                        },
                        'Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥': {
                            message: `Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥ ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ Ï†ïÌôïÏÑ±(92%), Í±¥Í∞ï Î™®ÎãàÌÑ∞ÎßÅ(85%), ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ(71%)Î•º Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎ©∞, ÏïàÏ†ÑÌïú Ïö¥ÎèôÍ≥º Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞Ïùò Ïã†Î¢∞ÏÑ±ÏùÑ ÏµúÏö∞ÏÑ†ÏúºÎ°ú Ïó¨ÍπÅÎãàÎã§.',
                            metrics: [
                                {value: '92%', label: 'Ï†ïÌôïÏÑ± Ï§ëÏãú'},
                                {value: '85%', label: 'Î™®ÎãàÌÑ∞ÎßÅ ÏÑ†Ìò∏'},
                                {value: '71%', label: 'ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ ÎãàÏ¶à'}
                            ],
                            choices: [
                                'Í±¥Í∞ï ÏßÄÌëú Î™®ÎãàÌÑ∞ÎßÅ - Ïã¨Î∞ïÏàò, ÌòàÏïï Îì± Ï†ïÌôïÌïú Ï∏°Ï†ï',
                                'ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ Í∏∞Îä• - Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Í≥µÏú† ÏãúÏä§ÌÖú',
                                'ÏïàÏ†ÑÌïú Ïö¥Îèô Í∞ÄÏù¥Îìú - Î∂ÄÏÉÅ Î∞©ÏßÄ Ï§ëÏã¨ ÌîÑÎ°úÍ∑∏Îû®'
                            ]
                        },
                        'ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ': {
                            message: `ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ ÏÉÅÏÑ∏ Î∂ÑÏÑù(94%), ÏÜåÏÖú Í∏∞Îä•(82%), Î™©Ìëú Îã¨ÏÑ±(89%)ÏùÑ ÌïµÏã¨ÏúºÎ°ú Ïó¨Í∏∞Î©∞, Í≥†Í∏â Ïö¥Îèô Îç∞Ïù¥ÌÑ∞ÏôÄ Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏôÄÏùò Í≤ΩÏüÅ ÏöîÏÜåÎ•º Í∞ïÌïòÍ≤å ÏÑ†Ìò∏Ìï©ÎãàÎã§.',
                            metrics: [
                                {value: '94%', label: 'ÏÉÅÏÑ∏ Î∂ÑÏÑù ÏÑ†Ìò∏'},
                                {value: '82%', label: 'ÏÜåÏÖú Í∏∞Îä• Ï§ëÏãú'},
                                {value: '89%', label: 'Î™©Ìëú Îã¨ÏÑ± ÏöïÍµ¨'}
                            ],
                            choices: [
                                'Í≥†Í∏â Ïö¥Îèô Î∂ÑÏÑù - ÏÉÅÏÑ∏Ìïú ÌçºÌè¨Î®ºÏä§ Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ',
                                'Í≤ΩÏüÅ Î∞è Îû≠ÌÇπ ÏãúÏä§ÌÖú - Î¶¨ÎçîÎ≥¥ÎìúÏôÄ ÏÑ±Í≥º ÎπÑÍµê',
                                'Ïª§ÎÆ§ÎãàÌã∞ Í∏∞Îä• - Ïö¥Îèô ÌååÌä∏ÎÑà Îß§Ïπ≠Í≥º Ï†ïÎ≥¥ Í≥µÏú†'
                            ]
                        }
                    };
                    
                    const response = responses[target];
                    addAIMessageWithDetailedInsight(response.message, response.insight, response.metrics, response.choices);
                }, 2000);
            }, 500);
        }

        // Feature selection
        function selectFeature(feature) {
            event.target.classList.add('selected');
            
            const buttons = event.target.parentNode.querySelectorAll('.choice-btn');
            buttons.forEach(btn => {
                if (btn !== event.target) {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                }
            });

            setTimeout(() => {
                addUserMessage(`${feature} Í∏∞Îä•ÏùÑ Ïö∞ÏÑ†Ï†ÅÏúºÎ°ú Í∞úÎ∞úÌïòÍ≤†ÏäµÎãàÎã§.`);
                
                setTimeout(() => {
                    updateProgress(85); // 85%Î°ú Ï¶ùÍ∞Ä
                    
                    const featureInsights = {
                        'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú': {
                            message: 'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥ÎìúÎ•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: '10Î∂Ñ Ïù¥ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Ïö¥ÎèôÏù¥ Ï¥àÎ≥¥Ïûê ÏôÑÏ£ºÏú®ÏùÑ 85% Ìñ•ÏÉÅÏãúÌÇ§Î©∞, Îã®Í≥ÑÎ≥Ñ Í∞ÄÏù¥ÎìúÍ∞Ä ÏûàÎäî Ïï±Ïùò ÏÇ¨Ïö©Ïûê ÎßåÏ°±ÎèÑÍ∞Ä 73% Îçî ÎÜíÏäµÎãàÎã§.',
                            metrics: [
                                {value: '85%', label: 'ÏôÑÏ£ºÏú® Ìñ•ÏÉÅ'},
                                {value: '73%', label: 'ÎßåÏ°±ÎèÑ Ï¶ùÍ∞Ä'},
                                {value: '10Î∂Ñ', label: 'ÏµúÏ†Å Ïö¥Îèô ÏãúÍ∞Ñ'}
                            ]
                        },
                        'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏': {
                            message: 'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏Î•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: 'ÏûëÏùÄ Î™©Ìëú ÏÑ§Ï†ïÍ≥º Î≥¥ÏÉÅ ÏãúÏä§ÌÖúÏù¥ ÏûàÎäî Ïï±Ïùò 30Ïùº Î¶¨ÌÖêÏÖòÎ•†Ïù¥ 67% Îçî ÎÜíÏúºÎ©∞, Í≤åÏûÑÌôî ÏöîÏÜåÍ∞Ä Ìè¨Ìï®Îêú ÏäµÍ¥Ä Ïï±Ïùò ÏßÄÏÜç ÏÇ¨Ïö©Î•†Ïù¥ 2.3Î∞∞ Ï¶ùÍ∞ÄÌï©ÎãàÎã§.',
                            metrics: [
                                {value: '67%', label: 'Î¶¨ÌÖêÏÖò Ìñ•ÏÉÅ'},
                                {value: '2.3Î∞∞', label: 'ÏßÄÏÜç ÏÇ¨Ïö©Î•†'},
                                {value: '21Ïùº', label: 'ÏäµÍ¥Ä ÌòïÏÑ± Í∏∞Í∞Ñ'}
                            ]
                        },
                        'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ': {
                            message: 'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄÎ•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: 'ÏÜåÏÖú Í∏∞Îä•Ïù¥ Ìè¨Ìï®Îêú ÌîºÌä∏ÎãàÏä§ Ïï±Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌïòÎ©∞, ÏπúÍµ¨ÏôÄ Ìï®ÍªòÌïòÎäî Ïö¥ÎèôÏùò ÏßÄÏÜçÎ•†Ïù¥ 90% Îçî ÎÜíÏäµÎãàÎã§.',
                            metrics: [
                                {value: '60%', label: 'Ï∞∏Ïó¨ÎèÑ Ï¶ùÍ∞Ä'},
                                {value: '90%', label: 'ÏßÄÏÜçÎ•† Ìñ•ÏÉÅ'},
                                {value: '4.2Î∞∞', label: 'Ï∂îÏ≤ú ÌôïÎ•†'}
                            ]
                        }
                    };
                    
                    const cleanFeatureName = feature.split(' - ')[0];
                    const insight = featureInsights[cleanFeatureName];
                    
                    if (insight) {
                        addAIMessageWithDetailedInsight(
                            insight.message,
                            insight.insight,
                            insight.metrics,
                            []
                        );
                        
                        setTimeout(() => {
                            addAIMessage('Ï¢ãÏäµÎãàÎã§! Ïù¥Ï†ú Ïù¥ Í∏∞Îä•Ïùò Íµ¨Ï≤¥Ï†ÅÏù∏ ÏÇ¨Ïö©Ïûê ÌîåÎ°úÏö∞Î•º ÏÑ§Í≥ÑÌï¥Î≥¥Í≤†ÏäµÎãàÎã§. ÏÇ¨Ïö©ÏûêÍ∞Ä Ï†úÌíàÏùÑ Ï≤òÏùå ÏÇ¨Ïö©Ìï† ÎïåÎ∂ÄÌÑ∞ Î™©Ìëú Îã¨ÏÑ±ÍπåÏßÄÏùò Ïó¨Ï†ïÏùÑ Ìï®Íªò ÎßåÎì§Ïñ¥Í∞ÄÏöî. Ïñ¥Îñ§ Îã®Í≥ÑÎ∂ÄÌÑ∞ ÏãúÏûëÌïòÍ≥† Ïã∂ÏúºÏã†Í∞ÄÏöî?');
                        }, 3000);
                    }
                }, 2000);
            }, 500);
        }

        // Message functions
        function addUserMessage(text) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-avatar">üë§</div>
                <div class="message-content">
                    <div class="message-bubble">${text}</div>
                    <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                </div>
            `;
            messagesContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        function addAIMessage(text) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message ai';
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">${text}</div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                scrollToBottom();
            }, 1500);
        }

        function addAIMessageWithDetailedInsight(message, insight, metrics, choices) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message ai';
                
                let metricsHtml = '';
                if (metrics && metrics.length > 0) {
                    metricsHtml = '<div class="rag-metrics">';
                    metrics.forEach(metric => {
                        metricsHtml += `
                            <div class="metric-item">
                                <div class="metric-value">${metric.value}</div>
                                <div class="metric-label">${metric.label}</div>
                            </div>
                        `;
                    });
                    metricsHtml += '</div>';
                }
                
                let choiceButtons = '';
                if (choices && choices.length > 0) {
                    choiceButtons = '<div class="choice-buttons">';
                    choices.forEach(choice => {
                        const parts = choice.split(' - ');
                        const title = parts[0];
                        const desc = parts[1] || '';
                        choiceButtons += `
                            <button class="choice-btn" onclick="selectTarget('${title}')">
                                ${choice}
                            </button>
                        `;
                    });
                    choiceButtons += '</div>';
                }
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            ${message}
                            
                            <div class="rag-insight">
                                <div class="rag-insight-header">
                                    üìä RAG Î∂ÑÏÑù Í≤∞Í≥º
                                </div>
                                <div class="rag-insight-content">
                                    ${insight}
                                </div>
                                ${metricsHtml}
                            </div>

                            ${choices.length > 0 ? 'Ïñ¥Îñ§ ÏÇ¨Ïö©ÏûêÏ∏µÏóê Î®ºÏ†Ä ÏßëÏ§ëÌïòÏãúÍ≤†ÏäµÎãàÍπå?' : ''}

                            ${choiceButtons}
                        </div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                scrollToBottom();
            }, 1500);
        }

        // Input handling
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || isTyping) return;
            
            addUserMessage(text);
            input.value = '';
            autoResize(input);
            
            // Generate AI response
            setTimeout(() => {
                generateRAGResponse(text);
            }, 1000);
        }

        function generateRAGResponse(userText) {
            // Simulate RAG-enhanced responses based on user input
            const ragResponses = [
                {
                    message: 'Ï¢ãÏùÄ ÏïÑÏù¥ÎîîÏñ¥ÎÑ§Ïöî! ÏµúÏã† Ìä∏Î†åÎìú Îç∞Ïù¥ÌÑ∞Î•º Î∞òÏòÅÌï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'ÌòÑÏû¨ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 45% ÏÑ±Ïû•ÌïòÍ≥† ÏûàÏñ¥, ÏÇ¨Ïö©Ïûê ÎßûÏ∂§Ìòï Í∏∞Îä•Ïù¥ ÌïµÏã¨ Ìä∏Î†åÎìúÏûÖÎãàÎã§. ÌäπÌûà Í∞úÏù∏Ïùò Ïö¥Îèô Ìå®ÌÑ¥ÏùÑ ÌïôÏäµÌïòÏó¨ ÏµúÏ†ÅÌôîÎêú Î£®Ìã¥ÏùÑ Ï†úÍ≥µÌïòÎäî Í∏∞Îä•Ïùò ÎßåÏ°±ÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.',
                    metrics: [
                        {value: '45%', label: 'ÏÑ±Ïû•Î•†'},
                        {value: '78%', label: 'Í∞úÏù∏Ìôî ÏÑ†Ìò∏ÎèÑ'},
                        {value: '2.1Î∞∞', label: 'ÎßåÏ°±ÎèÑ Ï¶ùÍ∞Ä'}
                    ]
                },
                {
                    message: 'ÏÇ¨Ïö©Ïûê Ï§ëÏã¨Ï†ÅÏù∏ Ï†ëÍ∑ºÏù¥Íµ∞Ïöî! ÌÉÄÍ≤ü ÌéòÎ•¥ÏÜåÎÇò Î∂ÑÏÑùÏùÑ ÌôúÏö©Ìï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑàÎì§Ïùò 89%Í∞Ä Ïâ¨Ïö¥ ÏãúÏûëÏùÑ ÏõêÌïòÍ≥†, 76%Í∞Ä ÏÑ±Ï∑®Í∞êÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌï©ÎãàÎã§. ÎòêÌïú Ï≤´ 2Ï£ºÍ∞ÑÏùò Í≤ΩÌóòÏù¥ Ïû•Í∏∞ ÏÇ¨Ïö©Î•†ÏùÑ Í≤∞Ï†ïÌïòÎäî ÌïµÏã¨ Í∏∞Í∞ÑÏûÖÎãàÎã§.',
                    metrics: [
                        {value: '89%', label: 'Ïâ¨Ïö¥ ÏãúÏûë ÏÑ†Ìò∏'},
                        {value: '76%', label: 'ÏÑ±Ï∑®Í∞ê Ï§ëÏãú'},
                        {value: '2Ï£º', label: 'Í≤∞Ï†ïÏ†Å Í∏∞Í∞Ñ'}
                    ]
                },
                {
                    message: 'Ìä∏Î†åÎìúÏóê ÎßûÎäî Î∞©Ìñ•ÏûÖÎãàÎã§! ÏóÖÍ≥Ñ Îç∞Ïù¥ÌÑ∞Î•º ÌôïÏù∏Ìï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§ Í∏∞Îä•Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌñàÍ≥†, ÏòàÎ∞© Ï§ëÏã¨ Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 32% ÏãúÏû• Ï†êÏú†Ïú®ÏùÑ Ï∞®ÏßÄÌïòÍ≥† ÏûàÏäµÎãàÎã§. Ïª§ÎÆ§ÎãàÌã∞ Í∏∞Î∞ò ÎèôÍ∏∞Î∂ÄÏó¨Í∞Ä Ìö®Í≥ºÏ†ÅÏûÖÎãàÎã§.',
                    metrics: [
                        {value: '60%', label: 'Ï∞∏Ïó¨ÎèÑ Ï¶ùÍ∞Ä'},
                        {value: '32%', label: 'ÏãúÏû• Ï†êÏú†Ïú®'},
                        {value: '3.4Î∞∞', label: 'ÎèôÍ∏∞Î∂ÄÏó¨ Ìö®Í≥º'}
                    ]
                }
            ];

            const randomResponse = ragResponses[Math.floor(Math.random() * ragResponses.length)];
            addAIMessageWithDetailedInsight(randomResponse.message, randomResponse.insight, randomResponse.metrics, []);

            // Update progress occasionally
            if (Math.random() > 0.6) { // Îçî ÏûêÏ£º ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
                setTimeout(() => {
                    const currentProgress = getCurrentProgress();
                    const newProgress = Math.min(100, currentProgress + Math.floor(Math.random() * 10) + 5);
                    updateProgress(newProgress);
                }, 2000);
            }
        }

        // Progress management
        function updateProgress(percentage) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const steps = document.querySelectorAll('#progressSteps .step');
            
            // Update progress bar
            progressFill.style.width = percentage + '%';
            
            // Calculate current step
            const currentStep = Math.ceil((percentage / 100) * 6);
            const stepNames = ['Î¶¨ÏÑúÏπò', 'ÏïÑÏù¥ÎîîÏñ¥', 'Í∏∞Ìöç', 'ÎîîÏûêÏù∏', 'ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ', 'Í≤ÄÏ¶ù'];
            
            // Update progress text
            progressText.textContent = `${Math.min(currentStep, 6)}/6 Îã®Í≥Ñ ÏôÑÎ£å (${percentage}%)`;
            
            // Update step indicators
            steps.forEach((step, index) => {
                // Remove all classes
                step.classList.remove('active', 'completed');
                
                if (index < currentStep - 1) {
                    // Completed steps
                    step.classList.add('completed');
                    step.innerHTML = `‚úÖ ${stepNames[index]}`;
                } else if (index === currentStep - 1 && currentStep <= 6) {
                    // Current active step
                    step.classList.add('active');
                    step.innerHTML = `üîÑ ${stepNames[index]}`;
                } else {
                    // Pending steps
                    step.innerHTML = `‚è≥ ${stepNames[index]}`;
                }
            });
            
            // Add visual feedback for progress update
            progressFill.style.transition = 'width 0.8s ease-in-out';
            
            // Show completion animation if 100%
            if (percentage >= 100) {
                setTimeout(() => {
                    progressText.textContent = 'üéâ ÌîÑÎ°úÏ†ùÌä∏ ÏôÑÎ£å! (100%)';
                    steps.forEach((step, index) => {
                        step.classList.remove('active');
                        step.classList.add('completed');
                        step.innerHTML = `‚úÖ ${stepNames[index]}`;
                    });
                }, 500);
            }
        }

        function getCurrentProgress() {
            const progressFill = document.getElementById('progressFill');
            const width = progressFill.style.width;
            return parseInt(width) || 50; // Í∏∞Î≥∏Í∞í 50%
        }

        // UI utilities
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        function scrollToBottom() {
            const messagesContainer = document.getElementById('chatMessages');
            if (messagesContainer) {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function showTypingIndicator() {
            if (isTyping) return;
            isTyping = true;
            
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                        RAG Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Ï§ë...
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }

        // RAG data simulation - Update trends and personas periodically
        function updateRAGData() {
            // Simulate real-time data updates
            const trendValues = document.querySelectorAll('.trend-value');
            trendValues.forEach(item => {
                if (Math.random() > 0.8) {
                    const currentText = item.textContent;
                    if (currentText.includes('%')) {
                        const baseValue = parseInt(currentText);
                        const newValue = baseValue + Math.floor(Math.random() * 3 - 1); // ¬±1% variation
                        item.textContent = `${newValue}%`;
                        
                        // Visual feedback for update
                        item.style.background = '#FEF3C7';
                        setTimeout(() => {
                            item.style.background = '';
                        }, 2000);
                    }
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // ÏÑ§Ï†ï Ïò§Î≤ÑÎ†àÏù¥Î•º Ï≤òÏùåÏóê ÌëúÏãú (hidden ÌÅ¥ÎûòÏä§ Ï†úÍ±∞)
            const setupOverlay = document.getElementById('setupOverlay');
            if (setupOverlay && setupOverlay.classList.contains('hidden')) {
                setupOverlay.classList.remove('hidden');
            }
            
            // Î©îÏãúÏßÄ ÏûÖÎ†•Ï∞Ω Ìè¨Ïª§Ïä§
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.focus();
            }
            
            // Ï†úÌíà ÏûÖÎ†• ÌïÑÎìú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
            const productNameInput = document.getElementById('productName');
            const productDescInput = document.getElementById('productDescription');
            
            function checkProductInputs() {
                const name = productNameInput ? productNameInput.value.trim() : '';
                const nextBtn = document.getElementById('nextBtn');
                if (nextBtn && currentSetupStep === 2) {
                    nextBtn.disabled = !name;
                }
            }
            
            if (productNameInput) {
                productNameInput.addEventListener('input', checkProductInputs);
            }
            if (productDescInput) {
                productDescInput.addEventListener('input', checkProductInputs);
            }
            
            // RAG Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            setInterval(updateRAGData, 45000);
            
            // Ïã§ÏãúÍ∞Ñ Ïù∏ÏÇ¨Ïù¥Ìä∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò
            setTimeout(() => {
                const badges = document.querySelectorAll('.rag-badge');
                badges.forEach(badge => {
                    if (badge.textContent === 'Ïã§ÏãúÍ∞Ñ') {
                        setInterval(() => {
                            badge.style.background = badge.style.background === 'rgb(239, 68, 68)' ? '#10B981' : '#EF4444';
                        }, 5000);
                    }
                });
            }, 3000);
        });
    </script><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProductAI - Ìï®Íªò ÎßåÎìúÎäî Ï†úÌíà ÎîîÏûêÏù∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #F8FAFC;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 32px rgba(0,0,0,0.08);
        }

        /* Left Sidebar - RAG Data */
        .sidebar {
            width: 320px;
            background: #FAFBFC;
            border-right: 1px solid #E2E8F0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid #E2E8F0;
            background: white;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 4px;
        }

        .sidebar-subtitle {
            font-size: 14px;
            color: #64748B;
        }

        .rag-sections {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .rag-section {
            background: white;
            border-radius: 12px;
            border: 1px solid #E2E8F0;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .rag-header {
            padding: 16px 20px;
            border-bottom: 1px solid #F1F5F9;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #FAFBFC;
        }

        .rag-header:hover {
            background: #F1F5F9;
        }

        .rag-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rag-badge {
            background: #10B981;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .rag-badge.warning {
            background: #F59E0B;
        }

        .rag-chevron {
            color: #9CA3AF;
            font-size: 12px;
            transition: transform 0.2s ease;
        }

        .rag-chevron.expanded {
            transform: rotate(180deg);
        }

        .rag-content {
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .rag-content.collapsed {
            display: none;
        }

        .trend-item, .persona-item {
            padding: 12px 0;
            border-bottom: 1px solid #F3F4F6;
        }

        .trend-item:last-child, .persona-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .trend-title, .persona-name {
            font-size: 13px;
            font-weight: 600;
            color: #1F2937;
            margin-bottom: 4px;
        }

        .trend-desc, .persona-desc {
            font-size: 12px;
            color: #6B7280;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .trend-meta, .persona-meta {
            font-size: 11px;
            color: #9CA3AF;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trend-value {
            background: #EEF2FF;
            color: #4338CA;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Main Chat Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 24px 32px;
            border-bottom: 1px solid #E2E8F0;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .project-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .project-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .project-details h1 {
            font-size: 20px;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 4px;
        }

        .project-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: #64748B;
        }

        .project-status {
            background: #EEF2FF;
            color: #4338CA;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 8px 16px;
            border: 1px solid #E2E8F0;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            border-color: #3B82F6;
            color: #3B82F6;
        }

        .action-btn.primary {
            background: #3B82F6;
            color: white;
            border-color: #3B82F6;
        }

        .action-btn.primary:hover {
            background: #2563EB;
        }

        /* Progress Bar */
        .progress-container {
            padding: 16px 32px;
            background: #F8FAFC;
            border-bottom: 1px solid #E2E8F0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
        }

        .progress-percentage {
            font-size: 14px;
            color: #6B7280;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #EDF2F7;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48BB78 0%, #38A169 100%);
            border-radius: 2px;
            transition: width 0.8s ease-in-out;
            width: 33%;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #9CA3AF;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 4px;
            flex: 1;
            text-align: center;
        }

        .step.completed {
            color: #10B981;
        }

        .step.active {
            color: #3B82F6;
            font-weight: 600;
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px 32px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 100%;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.ai {
            justify-content: flex-start;
        }

        .message-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: #5B6BF4;
            color: white;
            order: 1;
        }

        .message.user .message-avatar {
            background: #10B981;
            color: white;
            order: 2;
        }

        .message-content {
            max-width: 70%;
        }

        .message.ai .message-content {
            order: 2;
        }

        .message.user .message-content {
            order: 1;
        }

        .message-bubble {
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .message.ai .message-bubble {
            background: white;
            color: #374151;
            border: 1px solid #E5E7EB;
            border-bottom-left-radius: 4px;
        }

        .message.user .message-bubble {
            background: #3B82F6;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 11px;
            color: #9CA3AF;
            margin-top: 4px;
        }

        .message.ai .message-time {
            text-align: left;
        }

        .message.user .message-time {
            text-align: right;
        }

        /* RAG Insight Cards */
        .rag-insight {
            background: linear-gradient(135deg, #EBF4FF 0%, #E0E7FF 100%);
            border: 1px solid #C7D2FE;
            border-radius: 12px;
            padding: 16px;
            margin: 12px 0;
            font-size: 14px;
        }

        .rag-insight-header {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #3730A3;
            margin-bottom: 8px;
        }

        .rag-insight-content {
            font-size: 13px;
            line-height: 1.4;
            color: #4338CA;
        }

        .rag-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 8px;
        }

        .metric-item {
            background: white;
            border: 1px solid #E0E7FF;
            border-radius: 6px;
            padding: 8px;
            text-align: center;
        }

        .metric-value {
            font-weight: 700;
            color: #3730A3;
            font-size: 16px;
        }

        .metric-label {
            font-size: 11px;
            color: #6366F1;
            margin-top: 2px;
        }

        /* Choice Buttons */
        .choice-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 12px;
        }

        .choice-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #F8FAFC;
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            color: #374151;
        }

        .choice-btn:hover {
            background: #F1F5F9;
            border-color: #3B82F6;
        }

        .choice-btn.selected {
            background: #3B82F6;
            color: white;
            border-color: #3B82F6;
        }

        .choice-btn::before {
            content: '';
            width: 6px;
            height: 6px;
            background: #94A3B8;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .choice-btn:hover::before {
            background: #3B82F6;
        }

        .choice-btn.selected::before {
            background: white;
        }

        /* Input Area */
        .chat-input-area {
            padding: 16px 32px 20px;
            background: white;
            border-top: 1px solid #E2E8F0;
        }

        .input-container {
            display: flex;
            gap: 8px;
            align-items: flex-end;
            max-width: 100%;
            background: #F8FAFC;
            border: 1px solid #E2E8F0;
            border-radius: 24px;
            padding: 8px 12px;
        }

        .input-field {
            flex: 1;
            padding: 8px 12px;
            border: none;
            background: transparent;
            font-size: 14px;
            resize: none;
            outline: none;
            min-height: 20px;
            max-height: 120px;
            font-family: inherit;
            color: #374151;
        }

        .input-field::placeholder {
            color: #9CA3AF;
        }

        .send-btn {
            width: 32px;
            height: 32px;
            background: #3B82F6;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: #2563EB;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: #D1D5DB;
            cursor: not-allowed;
            transform: none;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 16px;
            border-bottom-left-radius: 4px;
            font-size: 14px;
            color: #6B7280;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #9CA3AF;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-6px);
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 280px;
            }
            
            .chat-messages {
                padding: 20px 24px;
            }
            
            .chat-input-area {
                padding: 16px 24px 20px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid #E2E8F0;
            }
            
            .rag-sections {
                padding: 16px;
            }
            
            .rag-section {
                margin-bottom: 12px;
            }
            
            .chat-header {
                padding: 16px 20px;
            }
            
            .progress-container {
                padding: 12px 20px;
            }
            
            .chat-messages {
                padding: 16px 20px;
            }
            
            .chat-input-area {
                padding: 16px 20px;
            }
            
            .message {
                max-width: 85%;
            }
            
            .choice-buttons {
                gap: 6px;
            }
            
            .choice-btn {
                font-size: 12px;
                padding: 10px 12px;
            }
            
            .setup-modal {
                width: 95%;
                margin: 20px;
            }
            
            .setup-header {
                padding: 24px 24px 20px;
            }
            
            .setup-content {
                padding: 24px;
            }
            
            .setup-actions {
                padding: 24px;
            }
            
            .persona-grid {
                grid-template-columns: 1fr;
            }
            
            .goal-grid {
                grid-template-columns: 1fr;
            }
            
            .product-examples {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .project-info {
                gap: 12px;
            }
            
            .project-avatar {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .project-details h1 {
                font-size: 18px;
            }
            
            .header-actions {
                flex-direction: column;
                gap: 4px;
            }
            
            .action-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
        }

        .rag-sections::-webkit-scrollbar,
        .chat-messages::-webkit-scrollbar,
        .rag-content::-webkit-scrollbar {
            width: 6px;
        }

        .rag-sections::-webkit-scrollbar-track,
        .chat-messages::-webkit-scrollbar-track,
        .rag-content::-webkit-scrollbar-track {
            background: #F1F5F9;
        }

        .rag-sections::-webkit-scrollbar-thumb,
        .chat-messages::-webkit-scrollbar-thumb,
        .rag-content::-webkit-scrollbar-thumb {
            background: #CBD5E1;
            border-radius: 3px;
        }

        .rag-sections::-webkit-scrollbar-thumb:hover,
        .chat-messages::-webkit-scrollbar-thumb:hover,
        .rag-content::-webkit-scrollbar-thumb:hover {
            background: #94A3B8;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Setup Overlay -->
        <div class="setup-overlay" id="setupOverlay">
            <div class="setup-modal">
                <div class="setup-header">
                    <h2>ÏÉà ÌîÑÎ°úÏ†ùÌä∏ ÏãúÏûëÌïòÍ∏∞</h2>
                    <div class="setup-subtitle">Ìï®Íªò ÎßåÎì§Ïñ¥Í∞à Ï†úÌíà ÎîîÏûêÏù∏ ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÑ§Ï†ïÌï¥Î≥¥ÏÑ∏Ïöî</div>
                    <div class="setup-progress">
                        <div class="setup-step-indicator active" id="indicator1"></div>
                        <div class="setup-step-indicator" id="indicator2"></div>
                        <div class="setup-step-indicator" id="indicator3"></div>
                    </div>
                </div>
                
                <div class="setup-content">
                    <!-- Step 1: Persona Selection -->
                    <div class="setup-step active" id="step1">
                        <div class="step-title">Ïñ¥Îñ§ Ïó≠Ìï†Î°ú ÌîÑÎ°úÏ†ùÌä∏Î•º ÏßÑÌñâÌïòÏãúÍ≤†ÏäµÎãàÍπå?</div>
                        <div class="step-description">
                            ÏÑ†ÌÉùÌïòÏã† Ïó≠Ìï†Ïóê Îî∞Îùº AIÍ∞Ä ÎßûÏ∂§Ìòï Í∞ÄÏù¥ÎìúÏôÄ Ï°∞Ïñ∏ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.<br>
                            Ïñ∏Ï†úÎì†ÏßÄ ÏÑ§Ï†ïÏóêÏÑú Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏñ¥Ïöî.
                        </div>
                        
                        <div class="persona-grid">
                            <div class="persona-card" onclick="selectPersona('junior')" data-persona="junior">
                                <div class="persona-icon">üå±</div>
                                <div class="persona-title">Ï£ºÎãàÏñ¥ ÎîîÏûêÏù¥ÎÑà</div>
                                <div class="persona-description">Í∏∞Ï¥àÎ∂ÄÌÑ∞ Ï∞®Í∑ºÏ∞®Í∑º Î∞∞Ïö∞Î©¥ÏÑú Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú ÏßÑÌñâÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                            <div class="persona-card" onclick="selectPersona('senior')" data-persona="senior">
                                <div class="persona-icon">üéØ</div>
                                <div class="persona-title">ÏãúÎãàÏñ¥ ÎîîÏûêÏù¥ÎÑà</div>
                                <div class="persona-description">Ï†ÑÎûµÏ†Å Í¥ÄÏ†êÏóêÏÑú ÎπÑÏ¶àÎãàÏä§ ÏûÑÌå©Ìä∏Î•º Í≥†Î†§Ìï¥ ÏßÑÌñâÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                            <div class="persona-card" onclick="selectPersona('pm')" data-persona="pm">
                                <div class="persona-icon">üìä</div>
                                <div class="persona-title">Ï†úÌíà Í∏∞ÌöçÏûê</div>
                                <div class="persona-description">Ìö®Ïú®Ï†ÅÏù¥Í≥† Í≤∞Í≥º Ï§ëÏã¨Ï†ÅÏúºÎ°ú ÏßÑÌñâÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Product Definition -->
                    <div class="setup-step" id="step2">
                        <div class="step-title">Ïñ¥Îñ§ Ï†úÌíàÏùÑ ÎîîÏûêÏù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?</div>
                        <div class="step-description">
                            Íµ¨Ï≤¥Ï†ÅÏù∏ Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏãúÍ±∞ÎÇò, ÏïÑÎûò ÏòàÏãú Ï§ëÏóêÏÑú ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.<br>
                            Î™ÖÌôïÌï†ÏàòÎ°ù Îçî Ï†ïÌôïÌïú Ïù∏ÏÇ¨Ïù¥Ìä∏Î•º Ï†úÍ≥µÎ∞õÏùÑ Ïàò ÏûàÏäµÎãàÎã§.
                        </div>
                        
                        <div class="product-form">
                            <div class="form-group">
                                <label class="form-label" for="productName">Ï†úÌíàÎ™Ö</label>
                                <input type="text" class="form-input" id="productName" placeholder="Ïòà: Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà">
                                <div class="form-help">Íµ¨Ï≤¥Ï†ÅÏù∏ Ï†úÌíàÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî</div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="productDescription">Ï†úÌíà ÏÑ§Î™Ö (ÏÑ†ÌÉùÏÇ¨Ìï≠)</label>
                                <textarea class="form-input form-textarea" id="productDescription" placeholder="Ï†úÌíàÏùò Ï£ºÏöî Í∏∞Îä•Ïù¥ÎÇò ÌäπÏßïÏùÑ Í∞ÑÎã®Ìûà ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî"></textarea>
                                <div class="form-help">Îçî Ï†ïÌôïÌïú Î∂ÑÏÑùÏùÑ ÏúÑÌï¥ Ï†úÌíàÏóê ÎåÄÌïú Í∞ÑÎã®Ìïú ÏÑ§Î™ÖÏùÑ Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî</div>
                            </div>
                        </div>
                        
                        <div class="product-examples">
                            <div class="example-card" onclick="selectProductExample('Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà', 'Ïö¥Îèô Ï∂îÏ†ÅÍ≥º Í±¥Í∞ï Í¥ÄÎ¶¨Î•º ÏúÑÌïú Ïõ®Ïñ¥Îü¨Î∏î Ï†úÌíà')">
                                <div class="example-title">‚åö Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà</div>
                                <div class="example-desc">Ïö¥Îèô Ï∂îÏ†ÅÍ≥º Í±¥Í∞ï Í¥ÄÎ¶¨</div>
                            </div>
                            <div class="example-card" onclick="selectProductExample('Î™®Î∞îÏùº ÏùåÏãù Ï£ºÎ¨∏ ÏÑúÎπÑÏä§', 'Îπ†Î•¥Í≥† Ìé∏Î¶¨Ìïú ÏùåÏãù Î∞∞Îã¨ ÏÑúÎπÑÏä§')">
                                <div class="example-title">üçî Î™®Î∞îÏùº ÏùåÏãù Ï£ºÎ¨∏ ÏÑúÎπÑÏä§</div>
                                <div class="example-desc">ÏùåÏãù Î∞∞Îã¨ ÏÑúÎπÑÏä§</div>
                            </div>
                            <div class="example-card" onclick="selectProductExample('AI ÌïôÏäµ ÎèÑÏö∞ÎØ∏ Ï†úÌíà', 'Í∞úÏù∏ ÎßûÏ∂§Ìòï ÌïôÏäµ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú')">
                                <div class="example-title">ü§ñ AI ÌïôÏäµ ÎèÑÏö∞ÎØ∏ Ï†úÌíà</div>
                                <div class="example-desc">Í∞úÏù∏ ÎßûÏ∂§Ìòï ÌïôÏäµ Í¥ÄÎ¶¨</div>
                            </div>
                            <div class="example-card" onclick="selectProductExample('Ïä§ÎßàÌä∏Ìôà Ï†úÏñ¥ ÏãúÏä§ÌÖú', 'IoT Í∏∞Í∏∞ ÌÜµÌï© Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú')">
                                <div class="example-title">üè† Ïä§ÎßàÌä∏Ìôà Ï†úÏñ¥ ÏãúÏä§ÌÖú</div>
                                <div class="example-desc">IoT Í∏∞Í∏∞ ÌÜµÌï© Í¥ÄÎ¶¨</div>
                            </div>
                            <div class="example-card" onclick="selectProductExample('Ï†ÑÍ∏∞Ï∞® ÎåÄÏãúÎ≥¥Îìú', 'Ï∞®Îüâ Ï†ïÎ≥¥ÏôÄ ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò ÌÜµÌï© Ïù∏ÌÑ∞ÌéòÏù¥Ïä§')">
                                <div class="example-title">üöó Ï†ÑÍ∏∞Ï∞® ÎåÄÏãúÎ≥¥Îìú</div>
                                <div class="example-desc">Ï∞®Îüâ Ï†ïÎ≥¥ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§</div>
                            </div>
                            <div class="example-card" onclick="selectProductExample('Ïò®ÎùºÏù∏ ÌòëÏóÖ ÌîåÎû´Ìèº', 'ÌåÄ ÌîÑÎ°úÏ†ùÌä∏ Í¥ÄÎ¶¨ ÌîåÎû´Ìèº')">
                                <div class="example-title">üë• Ïò®ÎùºÏù∏ ÌòëÏóÖ ÌîåÎû´Ìèº</div>
                                <div class="example-desc">ÌåÄ ÌîÑÎ°úÏ†ùÌä∏ Í¥ÄÎ¶¨</div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Goal Setting -->
                    <div class="setup-step" id="step3">
                        <div class="step-title">ÌîÑÎ°úÏ†ùÌä∏Ïùò Ï£ºÏöî Î™©ÌëúÎäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?</div>
                        <div class="step-description">
                            ÏÑ§Ï†ïÌïòÏã† Î™©ÌëúÏóê Îî∞Îùº ÌîÑÎ°úÏ†ùÌä∏ ÏßÑÌñâ Î∞©Ìñ•Í≥º Ïö∞ÏÑ†ÏàúÏúÑÍ∞Ä Í≤∞Ï†ïÎê©ÎãàÎã§.<br>
                            Í∞ÄÏû• Ï§ëÏöîÌïú Î™©Ìëú ÌïòÎÇòÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.
                        </div>
                        
                        <div class="goal-grid">
                            <div class="goal-card" onclick="selectGoal('ÏÉàÎ°úÏö¥ Ï†úÌíà ÎßåÎì§Í∏∞')" data-goal="ÏÉàÎ°úÏö¥ Ï†úÌíà ÎßåÎì§Í∏∞">
                                <div class="goal-icon">üÜï</div>
                                <div class="goal-title">ÏÉàÎ°úÏö¥ Ï†úÌíà ÎßåÎì§Í∏∞</div>
                                <div class="goal-description">ÏïÑÏù¥ÎîîÏñ¥Î∂ÄÌÑ∞ ÏãúÏûëÌï¥ÏÑú ÏôÑÏ†ÑÌûà ÏÉàÎ°úÏö¥ Ï†úÌíàÏùÑ Í∏∞ÌöçÌïòÍ≥† ÎîîÏûêÏù∏ÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                            <div class="goal-card" onclick="selectGoal('Í∏∞Ï°¥ Ï†úÌíà Í∞úÏÑ†ÌïòÍ∏∞')" data-goal="Í∏∞Ï°¥ Ï†úÌíà Í∞úÏÑ†ÌïòÍ∏∞">
                                <div class="goal-icon">‚ú®</div>
                                <div class="goal-title">Í∏∞Ï°¥ Ï†úÌíà Í∞úÏÑ†ÌïòÍ∏∞</div>
                                <div class="goal-description">ÌòÑÏû¨ ÏûàÎäî Ï†úÌíàÏùò ÏÇ¨Ïö©Ïûê Í≤ΩÌóòÏùÑ Î∂ÑÏÑùÌïòÍ≥† Í∞úÏÑ†Ï†êÏùÑ Ï∞æÏïÑ ÏóÖÍ∑∏Î†àÏù¥ÎìúÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                            <div class="goal-card" onclick="selectGoal('ÏÉàÎ°úÏö¥ Í∏∞Îä• Ï∂îÍ∞ÄÌïòÍ∏∞')" data-goal="ÏÉàÎ°úÏö¥ Í∏∞Îä• Ï∂îÍ∞ÄÌïòÍ∏∞">
                                <div class="goal-icon">üöÄ</div>
                                <div class="goal-title">ÏÉàÎ°úÏö¥ Í∏∞Îä• Ï∂îÍ∞ÄÌïòÍ∏∞</div>
                                <div class="goal-description">Í∏∞Ï°¥ Ï†úÌíàÏóê ÏÉàÎ°úÏö¥ Í∏∞Îä•ÏùÑ Ï∂îÍ∞ÄÌï¥ÏÑú ÏÇ¨Ïö©Ïûê Í∞ÄÏπòÎ•º ÎÜíÏù¥Í≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                            <div class="goal-card" onclick="selectGoal('Ï†ÑÏ≤¥Ï†ÅÏù∏ Î¶¨ÎîîÏûêÏù∏')" data-goal="Ï†ÑÏ≤¥Ï†ÅÏù∏ Î¶¨ÎîîÏûêÏù∏">
                                <div class="goal-icon">üé®</div>
                                <div class="goal-title">Ï†ÑÏ≤¥Ï†ÅÏù∏ Î¶¨ÎîîÏûêÏù∏</div>
                                <div class="goal-description">Í∏∞Ï°¥ Ï†úÌíàÏùò Ï†ÑÏ≤¥Ï†ÅÏù∏ ÎîîÏûêÏù∏Í≥º ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÏÉàÎ°≠Í≤å ÎîîÏûêÏù∏ÌïòÍ≥† Ïã∂Ïñ¥Ïöî</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="setup-actions">
                    <button class="setup-back" onclick="previousStep()" id="backBtn" disabled>Ïù¥Ï†Ñ</button>
                    <div>
                        <button class="setup-next" onclick="nextStep()" id="nextBtn" disabled>Îã§Ïùå</button>
                        <a href="#" class="setup-skip" onclick="skipSetup()">Í±¥ÎÑàÎõ∞Í∏∞</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Left Sidebar - RAG Data -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Îç∞Ïù¥ÌÑ∞ Ïù∏ÏÇ¨Ïù¥Ìä∏</div>
                <div class="sidebar-subtitle">Ïã§ÏãúÍ∞Ñ Ìä∏Î†åÎìú & ÌéòÎ•¥ÏÜåÎÇò Î∂ÑÏÑù</div>
            </div>
            
            <div class="rag-sections">
                <!-- Industry Trends -->
                <div class="rag-section">
                    <div class="rag-header" onclick="toggleSection('trends')">
                        <div class="rag-title">
                            üìà ÏóÖÏ¢Ö Ìä∏Î†åÎìú
                            <span class="rag-badge">Ïã§ÏãúÍ∞Ñ</span>
                        </div>
                        <span class="rag-chevron expanded" id="trends-chevron">‚ñº</span>
                    </div>
                    <div class="rag-content" id="trends-content">
                        <div class="trend-item">
                            <div class="trend-title">AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Ìó¨Ïä§ÏºÄÏñ¥</div>
                            <div class="trend-desc">Î®∏Ïã†Îü¨ÎãùÏùÑ ÌôúÏö©Ìïú Í∞úÏù∏ ÎßûÏ∂§Ìòï Í±¥Í∞ï Í¥ÄÎ¶¨ ÏÜîÎ£®ÏÖòÏù¥ Í∏âÏÑ±Ïû•ÌïòÍ≥† ÏûàÏúºÎ©∞, ÏòàÏ∏° Î∂ÑÏÑù Í∏∞Îä•Ïù¥ ÌïµÏã¨ Ï∞®Î≥ÑÌôî ÏöîÏÜåÎ°ú Î∂ÄÏÉÅ</div>
                            <div class="trend-meta">
                                <span>2024.01.15</span>
                                <span class="trend-value">+45%</span>
                            </div>
                        </div>
                        <div class="trend-item">
                            <div class="trend-title">ÏòàÎ∞© Ï§ëÏã¨ Ìó¨Ïä§ÏºÄÏñ¥</div>
                            <div class="trend-desc">ÏπòÎ£åÎ≥¥Îã§ ÏòàÎ∞©Ïóê ÏßëÏ§ëÌïòÎäî Ïõ∞ÎãàÏä§ Ïï± ÏãúÏû•Ïù¥ ÌôïÎåÄÎêòÎ©∞, ÏÇ¨Ïö©ÏûêÏùò ÏÉùÌôú ÏäµÍ¥Ä Í∞úÏÑ†Ïóê Ï¥àÏ†ê</div>
                            <div class="trend-meta">
                                <span>2024.01.14</span>
                                <span class="trend-value">32%</span>
                            </div>
                        </div>
                        <div class="trend-item">
                            <div class="trend-title">ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§</div>
                            <div class="trend-desc">ÏπúÍµ¨Îì§Í≥º Ìï®ÍªòÌïòÎäî Ïö¥Îèô Ï±åÎ¶∞ÏßÄÏôÄ Ïª§ÎÆ§ÎãàÌã∞ Í∏∞Îä•Ïù¥ ÏÇ¨Ïö©Ïûê Î¶¨ÌÖêÏÖòÏùò ÌïµÏã¨ ÏöîÏÜåÎ°ú ÏûëÏö©</div>
                            <div class="trend-meta">
                                <span>2024.01.13</span>
                                <span class="trend-value">+60%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Target Personas -->
                <div class="rag-section">
                    <div class="rag-header" onclick="toggleSection('personas')">
                        <div class="rag-title">
                            üë• ÌÉÄÍ≤ü ÌéòÎ•¥ÏÜåÎÇò
                            <span class="rag-badge warning">Î∂ÑÏÑùÎê®</span>
                        </div>
                        <span class="rag-chevron expanded" id="personas-chevron">‚ñº</span>
                    </div>
                    <div class="rag-content" id="personas-content">
                        <div class="persona-item">
                            <div class="persona-name">Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà (25-35ÏÑ∏)</div>
                            <div class="persona-desc">Ïö¥ÎèôÏùÑ ÏãúÏûëÌïòÎ†§Îäî ÏßÅÏû•Ïù∏Ï∏µÏúºÎ°ú, Í∞ÑÎã®ÌïòÍ≥† ÏßÄÏÜç Í∞ÄÎä•Ìïú Ïö¥Îèô Î£®Ìã¥ÏùÑ ÏÑ†Ìò∏ÌïòÎ©∞ ÏÑ±Ï∑®Í∞êÏùÑ ÌÜµÌïú ÎèôÍ∏∞Î∂ÄÏó¨Í∞Ä Ï§ëÏöî</div>
                            <div class="persona-meta">
                                <span>Ïâ¨Ïö¥ ÏãúÏûë 89% ‚Ä¢ ÏÑ±Ï∑®Í∞ê 76%</span>
                            </div>
                        </div>
                        <div class="persona-item">
                            <div class="persona-name">Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥ (50-65ÏÑ∏)</div>
                            <div class="persona-desc">Í±¥Í∞ï Í¥ÄÎ¶¨Ïóê Í¥ÄÏã¨Ïù¥ ÎßéÏùÄ Ï§ëÏû•ÎÖÑÏ∏µÏúºÎ°ú, Ï†ïÌôïÌïú Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ÏôÄ Ï†ÑÎ¨∏ÏùòÏôÄÏùò Ïó∞Í≥Ñ ÏÑúÎπÑÏä§Î•º Ï§ëÏãú</div>
                            <div class="persona-meta">
                                <span>Ï†ïÌôïÏÑ± 92% ‚Ä¢ Î™®ÎãàÌÑ∞ÎßÅ 85%</span>
                            </div>
                        </div>
                        <div class="persona-item">
                            <div class="persona-name">ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ (20-40ÏÑ∏)</div>
                            <div class="persona-desc">Ïö¥ÎèôÏùÑ Ï∑®ÎØ∏Î°ú ÌïòÎäî Ï∏µÏúºÎ°ú, ÏÉÅÏÑ∏Ìïú Ïö¥Îèô Î∂ÑÏÑùÍ≥º Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏôÄÏùò Í≤ΩÏüÅ ÏöîÏÜåÎ•º ÏÑ†Ìò∏</div>
                            <div class="persona-meta">
                                <span>ÏÉÅÏÑ∏ Î∂ÑÏÑù 94% ‚Ä¢ ÏÜåÏÖú 82%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Insights -->
                <div class="rag-section">
                    <div class="rag-header" onclick="toggleSection('market')">
                        <div class="rag-title">
                            üìä ÏãúÏû• Î∂ÑÏÑù
                            <span class="rag-badge">ÏóÖÎç∞Ïù¥Ìä∏Îê®</span>
                        </div>
                        <span class="rag-chevron" id="market-chevron">‚ñº</span>
                    </div>
                    <div class="rag-content collapsed" id="market-content">
                        <div class="trend-item">
                            <div class="trend-title">Ìó¨Ïä§ÏºÄÏñ¥ Ïï± ÏãúÏû• Í∑úÎ™®</div>
                            <div class="trend-desc">Í∏ÄÎ°úÎ≤å Î™®Î∞îÏùº Ìó¨Ïä§ ÏãúÏû•Ïù¥ Ïó∞ÌèâÍ∑† 12.8% ÏÑ±Ïû•ÌïòÎ©∞ 2025ÎÖÑ 2,320Ïñµ Îã¨Îü¨ Í∑úÎ™® ÏòàÏÉÅ</div>
                            <div class="trend-meta">
                                <span>2024.01.10</span>
                                <span class="trend-value">$232B</span>
                            </div>
                        </div>
                        <div class="trend-item">
                            <div class="trend-title">ÏÇ¨Ïö©Ïûê ÏÑ†Ìò∏ Í∏∞Îä•</div>
                            <div class="trend-desc">Ïö¥Îèô Ìä∏ÎûòÌÇπ(78%), ÏãùÎã® Í¥ÄÎ¶¨(65%), ÏàòÎ©¥ Î™®ÎãàÌÑ∞ÎßÅ(58%) ÏàúÏúºÎ°ú ÏÑ†Ìò∏ÎèÑ ÎÜíÏùå</div>
                            <div class="trend-meta">
                                <span>ÏÑ§Î¨∏ Í∏∞Ï§Ä</span>
                                <span class="trend-value">N=2,400</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <div class="chat-header">
                <div class="project-info">
                    <div class="project-avatar">üé®</div>
                    <div class="project-details">
                        <h1>Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà</h1>
                        <div class="project-meta">
                            <span class="project-status">ÏßÑÌñâ Ï§ë</span>
                            <span>‚Ä¢</span>
                            <span>ÏãúÎãàÏñ¥ Ï†úÌíà ÎîîÏûêÏù¥ÎÑà</span>
                            <span>‚Ä¢</span>
                            <span>ÏãúÏûë: 2024.01.15</span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn">üíæ Ï†ÄÏû•</button>
                    <button class="action-btn">üì§ Í≥µÏú†</button>
                    <button class="action-btn primary">‚öôÔ∏è ÏÑ§Ï†ï</button>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-header">
                    <div class="progress-title">ÌîÑÎ°úÏ†ùÌä∏ ÏßÑÌñâÎ•†</div>
                    <div class="progress-percentage" id="progressText">2/6 Îã®Í≥Ñ ÏôÑÎ£å (33%)</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-steps" id="progressSteps">
                    <div class="step completed">‚úÖ Î¶¨ÏÑúÏπò</div>
                    <div class="step active">üîÑ ÏïÑÏù¥ÎîîÏñ¥</div>
                    <div class="step">‚è≥ Í∏∞Ìöç</div>
                    <div class="step">‚è≥ ÎîîÏûêÏù∏</div>
                    <div class="step">‚è≥ ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ</div>
                    <div class="step">‚è≥ Í≤ÄÏ¶ù</div>
                </div>
            </div>

            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <!-- AI Message with RAG Insight -->
                <div class="message ai">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            Ïä§ÎßàÌä∏ÏõåÏπò Ìó¨Ïä§ÏºÄÏñ¥ Ï†úÌíà ÎîîÏûêÏù∏ÏùÑ ÏãúÏûëÌïòÍ≤†ÏäµÎãàÎã§! 

                            <div class="rag-insight">
                                <div class="rag-insight-header">
                                    üìä ÏµúÏã† ÏãúÏû• Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù
                                </div>
                                <div class="rag-insight-content">
                                    ÌòÑÏû¨ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 45% ÏÑ±Ïû•ÌïòÍ≥† ÏûàÏúºÎ©∞, ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§ Í∏∞Îä•Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌñàÏäµÎãàÎã§. Ï£ºÏöî ÌÉÄÍ≤üÏ∏µÏù∏ Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà(25-35ÏÑ∏)Îäî Ïâ¨Ïö¥ ÏãúÏûëÍ≥º ÏÑ±Ï∑®Í∞êÏùÑ Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌï©ÎãàÎã§.
                                </div>
                                <div class="rag-metrics">
                                    <div class="metric-item">
                                        <div class="metric-value">45%</div>
                                        <div class="metric-label">AI Ìó¨Ïä§ÏºÄÏñ¥ ÏÑ±Ïû•Î•†</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-value">89%</div>
                                        <div class="metric-label">Ïâ¨Ïö¥ ÏãúÏûë ÏÑ†Ìò∏ÎèÑ</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-value">76%</div>
                                        <div class="metric-label">ÏÑ±Ï∑®Í∞ê Ï§ëÏöîÎèÑ</div>
                                    </div>
                                </div>
                            </div>

                            Ïñ¥Îñ§ ÏÇ¨Ïö©ÏûêÏ∏µÏóê Î®ºÏ†Ä ÏßëÏ§ëÌïòÏãúÍ≤†ÏäµÎãàÍπå?

                            <div class="choice-buttons">
                                <button class="choice-btn" onclick="selectTarget('Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà')">
                                    üå± Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà (25-35ÏÑ∏) - ÏãúÏûëÌïòÎäî ÏßÅÏû•Ïù∏ ‚Ä¢ Ïâ¨Ïö¥ Ï†ëÍ∑º ÏÑ†Ìò∏
                                </button>
                                <button class="choice-btn" onclick="selectTarget('Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥')">
                                    üéØ Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥ (50-65ÏÑ∏) - Í±¥Í∞ï Í¥ÄÎ¶¨ Ï§ëÏã¨ ‚Ä¢ Ï†ïÌôïÏÑ± Ï§ëÏãú
                                </button>
                                <button class="choice-btn" onclick="selectTarget('ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ')">
                                    üí™ ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ (20-40ÏÑ∏) - Ïö¥Îèô Ïï†Ìò∏Í∞Ä ‚Ä¢ Í≥†Í∏â Í∏∞Îä• ÏÑ†Ìò∏
                                </button>
                            </div>
                        </div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                </div>

                <!-- User Response -->
                <div class="message user">
                    <div class="message-avatar">üë§</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑàÏóê ÏßëÏ§ëÌï¥ÏÑú ÏßÑÌñâÌï¥Î≥ºÍ≤åÏöî. Ïö¥ÎèôÏùÑ Ï≤òÏùå ÏãúÏûëÌïòÎäî ÏÇ¨ÎûåÎì§Ïù¥ ÏâΩÍ≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎäî Ï†úÌíàÏùÑ ÎßåÎì§Í≥† Ïã∂Ïñ¥Ïöî.
                        </div>
                        <div class="message-time">2Î∂Ñ Ï†Ñ</div>
                    </div>
                </div>

                <!-- AI Follow-up with Trend Data -->
                <div class="message ai">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            ÌõåÎ•≠Ìïú ÏÑ†ÌÉùÏûÖÎãàÎã§! Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑàÏ∏µÏùÄ ÌòÑÏû¨ Í∞ÄÏû• ÏÑ±Ïû• Ïû†Ïû¨Î†•Ïù¥ ÎÜíÏùÄ ÌÉÄÍ≤üÏù¥ÏóêÏöî.

                            <div class="rag-insight">
                                <div class="rag-insight-header">
                                    üéØ Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà ÌÉÄÍ≤ü Ïù∏ÏÇ¨Ïù¥Ìä∏
                                </div>
                                <div class="rag-insight-content">
                                    Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑàÎì§Ïùò Ï£ºÏöî ÎãàÏ¶à Î∂ÑÏÑù Í≤∞Í≥º, Ïâ¨Ïö¥ ÏãúÏûë(89%), ÏÑ±Ï∑®Í∞ê(76%), ÏäµÍ¥Ä ÌòïÏÑ±(68%) ÏàúÏúºÎ°ú Ï§ëÏöîÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§. ÎòêÌïú ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§ Ìä∏Î†åÎìúÏôÄÎèÑ Ïûò ÎßûÏïÑ ÏπúÍµ¨Îì§Í≥º Ìï®ÍªòÌïòÎäî ÎèôÍ∏∞Î∂ÄÏó¨ ÏöîÏÜåÍ∞Ä Ìö®Í≥ºÏ†ÅÏûÖÎãàÎã§.
                                </div>
                                <div class="rag-metrics">
                                    <div class="metric-item">
                                        <div class="metric-value">10Î∂Ñ</div>
                                        <div class="metric-label">ÏÑ†Ìò∏ Ïö¥Îèô ÏãúÍ∞Ñ</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-value">68%</div>
                                        <div class="metric-label">ÏäµÍ¥Ä ÌòïÏÑ± ÎãàÏ¶à</div>
                                    </div>
                                    <div class="metric-item">
                                        <div class="metric-value">3Ï£º</div>
                                        <div class="metric-label">ÌèâÍ∑† Ìè¨Í∏∞ ÏãúÏ†ê</div>
                                    </div>
                                </div>
                            </div>

                            Ïù¥Îì§ÏùÑ ÏúÑÌïú ÌïµÏã¨ Í∏∞Îä•ÏùÑ Ïö∞ÏÑ†ÏàúÏúÑÎ≥ÑÎ°ú Ï†ïÌï¥Î≥ºÍπåÏöî?

                            <div class="choice-buttons">
                                <button class="choice-btn" onclick="selectFeature('Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú')">
                                    üìù Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú - 10Î∂Ñ ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Ï¥àÎ≥¥ÏûêÏö© Î£®Ìã¥
                                </button>
                                <button class="choice-btn" onclick="selectFeature('ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏')">
                                    üèÜ ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏ - ÏûëÏùÄ Î™©ÌëúÏôÄ Î≥¥ÏÉÅ ÏãúÏä§ÌÖúÏúºÎ°ú ÏßÄÏÜçÏÑ± ÌôïÎ≥¥
                                </button>
                                <button class="choice-btn" onclick="selectFeature('ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ')">
                                    üë• ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ - Ìï®ÍªòÌïòÎäî ÎèôÍ∏∞Î∂ÄÏó¨ÏôÄ ÏÜåÏÖú Í∏∞Îä•
                                </button>
                            </div>
                        </div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chat-input-area">
                <div class="input-container">
                    <textarea 
                        class="input-field" 
                        id="messageInput"
                        placeholder="Ïñ¥Îñ§ Î∞©Ìñ•ÏúºÎ°ú ÏßÑÌñâÌïòÍ≥† Ïã∂ÏúºÏã†ÏßÄ ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî..."
                        rows="1"
                        onkeypress="handleKeyPress(event)"
                        oninput="autoResize(this)"
                    ></textarea>
                    <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                        ‚û§
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        let isTyping = false;

        // Toggle RAG sections
        function toggleSection(sectionId) {
            const content = document.getElementById(`${sectionId}-content`);
            const chevron = document.getElementById(`${sectionId}-chevron`);
            
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                chevron.textContent = '‚ñº';
                chevron.classList.add('expanded');
            } else {
                content.classList.add('collapsed');
                chevron.textContent = '‚ñ∂';
                chevron.classList.remove('expanded');
            }
        }

        // Target selection
        function selectTarget(target) {
            // Visual feedback
            event.target.classList.add('selected');
            
            // Disable other buttons
            const buttons = event.target.parentNode.querySelectorAll('.choice-btn');
            buttons.forEach(btn => {
                if (btn !== event.target) {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                }
            });

            // Send user message
            setTimeout(() => {
                addUserMessage(`${target} ÌÉÄÍ≤üÏúºÎ°ú ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.`);
                
                setTimeout(() => {
                    // Update progress
                    updateProgress(50);
                    
                    // AI response with RAG data
                    const responses = {
                        'Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà': {
                            message: `Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑà ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ 10Î∂Ñ ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Í∞ÑÎã®Ìïú Ïö¥ÎèôÏùÑ ÏÑ†Ìò∏ÌïòÎ©∞, ÌèâÍ∑† 3Ï£º ÏãúÏ†êÏóêÏÑú Ìè¨Í∏∞Ïú®Ïù¥ ÎÜíÏïÑ Ï¥àÍ∏∞ ÏäµÍ¥Ä ÌòïÏÑ±Ïù¥ Îß§Ïö∞ Ï§ëÏöîÌï©ÎãàÎã§. ÏÑ±Ï∑®Í∞êÏùÑ ÌÜµÌïú ÎèôÍ∏∞Î∂ÄÏó¨Í∞Ä ÏßÄÏÜç ÏÇ¨Ïö©Ïùò ÌïµÏã¨ ÏöîÏÜåÏûÖÎãàÎã§.',
                            metrics: [
                                {value: '10Î∂Ñ', label: 'ÏÑ†Ìò∏ Ïö¥Îèô ÏãúÍ∞Ñ'},
                                {value: '68%', label: 'ÏäµÍ¥Ä ÌòïÏÑ± ÎãàÏ¶à'},
                                {value: '3Ï£º', label: 'ÌèâÍ∑† Ìè¨Í∏∞ ÏãúÏ†ê'}
                            ],
                            choices: [
                                'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú - 10Î∂Ñ ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Ï¥àÎ≥¥ÏûêÏö© Î£®Ìã¥',
                                'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏ - ÏûëÏùÄ Î™©ÌëúÏôÄ Î≥¥ÏÉÅ ÏãúÏä§ÌÖúÏúºÎ°ú ÏßÄÏÜçÏÑ± ÌôïÎ≥¥', 
                                'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ - Ìï®ÍªòÌïòÎäî ÎèôÍ∏∞Î∂ÄÏó¨ÏôÄ ÏÜåÏÖú Í∏∞Îä•'
                            ]
                        },
                        'Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥': {
                            message: `Ïï°Ìã∞Î∏å ÏãúÎãàÏñ¥ ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ Ï†ïÌôïÏÑ±(92%), Í±¥Í∞ï Î™®ÎãàÌÑ∞ÎßÅ(85%), ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ(71%)Î•º Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎ©∞, ÏïàÏ†ÑÌïú Ïö¥ÎèôÍ≥º Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞Ïùò Ïã†Î¢∞ÏÑ±ÏùÑ ÏµúÏö∞ÏÑ†ÏúºÎ°ú Ïó¨ÍπÅÎãàÎã§.',
                            metrics: [
                                {value: '92%', label: 'Ï†ïÌôïÏÑ± Ï§ëÏãú'},
                                {value: '85%', label: 'Î™®ÎãàÌÑ∞ÎßÅ ÏÑ†Ìò∏'},
                                {value: '71%', label: 'ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ ÎãàÏ¶à'}
                            ],
                            choices: [
                                'Í±¥Í∞ï ÏßÄÌëú Î™®ÎãàÌÑ∞ÎßÅ - Ïã¨Î∞ïÏàò, ÌòàÏïï Îì± Ï†ïÌôïÌïú Ï∏°Ï†ï',
                                'ÏùòÎ£åÏßÑ Ïó∞Í≥Ñ Í∏∞Îä• - Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Í≥µÏú† ÏãúÏä§ÌÖú',
                                'ÏïàÏ†ÑÌïú Ïö¥Îèô Í∞ÄÏù¥Îìú - Î∂ÄÏÉÅ Î∞©ÏßÄ Ï§ëÏã¨ ÌîÑÎ°úÍ∑∏Îû®'
                            ]
                        },
                        'ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ': {
                            message: `ÌîºÌä∏ÎãàÏä§ ÎßàÎãàÏïÑ ÌÉÄÍ≤üÏúºÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`,
                            insight: 'Ïù¥ ÌÉÄÍ≤üÏ∏µÏùÄ ÏÉÅÏÑ∏ Î∂ÑÏÑù(94%), ÏÜåÏÖú Í∏∞Îä•(82%), Î™©Ìëú Îã¨ÏÑ±(89%)ÏùÑ ÌïµÏã¨ÏúºÎ°ú Ïó¨Í∏∞Î©∞, Í≥†Í∏â Ïö¥Îèô Îç∞Ïù¥ÌÑ∞ÏôÄ Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏôÄÏùò Í≤ΩÏüÅ ÏöîÏÜåÎ•º Í∞ïÌïòÍ≤å ÏÑ†Ìò∏Ìï©ÎãàÎã§.',
                            metrics: [
                                {value: '94%', label: 'ÏÉÅÏÑ∏ Î∂ÑÏÑù ÏÑ†Ìò∏'},
                                {value: '82%', label: 'ÏÜåÏÖú Í∏∞Îä• Ï§ëÏãú'},
                                {value: '89%', label: 'Î™©Ìëú Îã¨ÏÑ± ÏöïÍµ¨'}
                            ],
                            choices: [
                                'Í≥†Í∏â Ïö¥Îèô Î∂ÑÏÑù - ÏÉÅÏÑ∏Ìïú ÌçºÌè¨Î®ºÏä§ Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ',
                                'Í≤ΩÏüÅ Î∞è Îû≠ÌÇπ ÏãúÏä§ÌÖú - Î¶¨ÎçîÎ≥¥ÎìúÏôÄ ÏÑ±Í≥º ÎπÑÍµê',
                                'Ïª§ÎÆ§ÎãàÌã∞ Í∏∞Îä• - Ïö¥Îèô ÌååÌä∏ÎÑà Îß§Ïπ≠Í≥º Ï†ïÎ≥¥ Í≥µÏú†'
                            ]
                        }
                    };
                    
                    const response = responses[target];
                    addAIMessageWithDetailedInsight(response.message, response.insight, response.metrics, response.choices);
                }, 2000);
            }, 500);
        }

        // Feature selection
        function selectFeature(feature) {
            event.target.classList.add('selected');
            
            const buttons = event.target.parentNode.querySelectorAll('.choice-btn');
            buttons.forEach(btn => {
                if (btn !== event.target) {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                }
            });

            setTimeout(() => {
                addUserMessage(`${feature} Í∏∞Îä•ÏùÑ Ïö∞ÏÑ†Ï†ÅÏúºÎ°ú Í∞úÎ∞úÌïòÍ≤†ÏäµÎãàÎã§.`);
                
                setTimeout(() => {
                    updateProgress(75);
                    
                    const featureInsights = {
                        'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥Îìú': {
                            message: 'Í∞ÑÎã®Ìïú Ïö¥Îèô Í∞ÄÏù¥ÎìúÎ•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: '10Î∂Ñ Ïù¥ÎÇ¥ ÏôÑÎ£å Í∞ÄÎä•Ìïú Ïö¥ÎèôÏù¥ Ï¥àÎ≥¥Ïûê ÏôÑÏ£ºÏú®ÏùÑ 85% Ìñ•ÏÉÅÏãúÌÇ§Î©∞, Îã®Í≥ÑÎ≥Ñ Í∞ÄÏù¥ÎìúÍ∞Ä ÏûàÎäî Ïï±Ïùò ÏÇ¨Ïö©Ïûê ÎßåÏ°±ÎèÑÍ∞Ä 73% Îçî ÎÜíÏäµÎãàÎã§.',
                            metrics: [
                                {value: '85%', label: 'ÏôÑÏ£ºÏú® Ìñ•ÏÉÅ'},
                                {value: '73%', label: 'ÎßåÏ°±ÎèÑ Ï¶ùÍ∞Ä'},
                                {value: '10Î∂Ñ', label: 'ÏµúÏ†Å Ïö¥Îèô ÏãúÍ∞Ñ'}
                            ]
                        },
                        'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏': {
                            message: 'ÏäµÍ¥Ä ÌòïÏÑ± ÎèÑÏö∞ÎØ∏Î•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: 'ÏûëÏùÄ Î™©Ìëú ÏÑ§Ï†ïÍ≥º Î≥¥ÏÉÅ ÏãúÏä§ÌÖúÏù¥ ÏûàÎäî Ïï±Ïùò 30Ïùº Î¶¨ÌÖêÏÖòÎ•†Ïù¥ 67% Îçî ÎÜíÏúºÎ©∞, Í≤åÏûÑÌôî ÏöîÏÜåÍ∞Ä Ìè¨Ìï®Îêú ÏäµÍ¥Ä Ïï±Ïùò ÏßÄÏÜç ÏÇ¨Ïö©Î•†Ïù¥ 2.3Î∞∞ Ï¶ùÍ∞ÄÌï©ÎãàÎã§.',
                            metrics: [
                                {value: '67%', label: 'Î¶¨ÌÖêÏÖò Ìñ•ÏÉÅ'},
                                {value: '2.3Î∞∞', label: 'ÏßÄÏÜç ÏÇ¨Ïö©Î•†'},
                                {value: '21Ïùº', label: 'ÏäµÍ¥Ä ÌòïÏÑ± Í∏∞Í∞Ñ'}
                            ]
                        },
                        'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄ': {
                            message: 'ÏπúÍµ¨ Ï±åÎ¶∞ÏßÄÎ•º ÌïµÏã¨ Í∏∞Îä•ÏúºÎ°ú ÏÑ†Ï†ïÌñàÏäµÎãàÎã§!',
                            insight: 'ÏÜåÏÖú Í∏∞Îä•Ïù¥ Ìè¨Ìï®Îêú ÌîºÌä∏ÎãàÏä§ Ïï±Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌïòÎ©∞, ÏπúÍµ¨ÏôÄ Ìï®ÍªòÌïòÎäî Ïö¥ÎèôÏùò ÏßÄÏÜçÎ•†Ïù¥ 90% Îçî ÎÜíÏäµÎãàÎã§.',
                            metrics: [
                                {value: '60%', label: 'Ï∞∏Ïó¨ÎèÑ Ï¶ùÍ∞Ä'},
                                {value: '90%', label: 'ÏßÄÏÜçÎ•† Ìñ•ÏÉÅ'},
                                {value: '4.2Î∞∞', label: 'Ï∂îÏ≤ú ÌôïÎ•†'}
                            ]
                        }
                    };
                    
                    const cleanFeatureName = feature.split(' - ')[0];
                    const insight = featureInsights[cleanFeatureName];
                    
                    if (insight) {
                        addAIMessageWithDetailedInsight(
                            insight.message,
                            insight.insight,
                            insight.metrics,
                            []
                        );
                        
                        setTimeout(() => {
                            addAIMessage('Ï¢ãÏäµÎãàÎã§! Ïù¥Ï†ú Ïù¥ Í∏∞Îä•Ïùò Íµ¨Ï≤¥Ï†ÅÏù∏ ÏÇ¨Ïö©Ïûê ÌîåÎ°úÏö∞Î•º ÏÑ§Í≥ÑÌï¥Î≥¥Í≤†ÏäµÎãàÎã§. ÏÇ¨Ïö©ÏûêÍ∞Ä Ïï±ÏùÑ Ï≤òÏùå Ïó¥ÏóàÏùÑ ÎïåÎ∂ÄÌÑ∞ Î™©Ìëú Îã¨ÏÑ±ÍπåÏßÄÏùò Ïó¨Ï†ïÏùÑ Ìï®Íªò ÎßåÎì§Ïñ¥Í∞ÄÏöî. Ïñ¥Îñ§ Îã®Í≥ÑÎ∂ÄÌÑ∞ ÏãúÏûëÌïòÍ≥† Ïã∂ÏúºÏã†Í∞ÄÏöî?');
                        }, 3000);
                    }
                }, 2000);
            }, 500);
        }

        // Message functions
        function addUserMessage(text) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-avatar">üë§</div>
                <div class="message-content">
                    <div class="message-bubble">${text}</div>
                    <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                </div>
            `;
            messagesContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        function addAIMessage(text) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message ai';
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">${text}</div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                scrollToBottom();
            }, 1500);
        }

        function addAIMessageWithDetailedInsight(message, insight, metrics, choices) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message ai';
                
                let metricsHtml = '';
                if (metrics && metrics.length > 0) {
                    metricsHtml = '<div class="rag-metrics">';
                    metrics.forEach(metric => {
                        metricsHtml += `
                            <div class="metric-item">
                                <div class="metric-value">${metric.value}</div>
                                <div class="metric-label">${metric.label}</div>
                            </div>
                        `;
                    });
                    metricsHtml += '</div>';
                }
                
                let choiceButtons = '';
                if (choices && choices.length > 0) {
                    choiceButtons = '<div class="choice-buttons">';
                    choices.forEach(choice => {
                        const parts = choice.split(' - ');
                        const title = parts[0];
                        const desc = parts[1] || '';
                        choiceButtons += `
                            <button class="choice-btn" onclick="selectFeature('${choice}')">
                                ${title}${desc ? ' - ' + desc : ''}
                            </button>
                        `;
                    });
                    choiceButtons += '</div>';
                }
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            ${message}
                            
                            <div class="rag-insight">
                                <div class="rag-insight-header">
                                    üìä RAG Î∂ÑÏÑù Í≤∞Í≥º
                                </div>
                                <div class="rag-insight-content">
                                    ${insight}
                                </div>
                                ${metricsHtml}
                            </div>

                            ${choices.length > 0 ? 'Ïù¥Îì§ÏùÑ ÏúÑÌïú ÌïµÏã¨ Í∏∞Îä•ÏùÑ Ïö∞ÏÑ†ÏàúÏúÑÎ≥ÑÎ°ú Ï†ïÌï¥Î≥ºÍπåÏöî?' : ''}

                            ${choiceButtons}
                        </div>
                        <div class="message-time">Î∞©Í∏à Ï†Ñ</div>
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                scrollToBottom();
            }, 1500);
        }

        // Input handling
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || isTyping) return;
            
            addUserMessage(text);
            input.value = '';
            autoResize(input);
            
            // Generate AI response
            setTimeout(() => {
                generateRAGResponse(text);
            }, 1000);
        }

        function generateRAGResponse(userText) {
            // Simulate RAG-enhanced responses based on user input
            const ragResponses = [
                {
                    message: 'Ï¢ãÏùÄ ÏïÑÏù¥ÎîîÏñ¥ÎÑ§Ïöî! ÏµúÏã† Ìä∏Î†åÎìú Îç∞Ïù¥ÌÑ∞Î•º Î∞òÏòÅÌï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'ÌòÑÏû¨ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 45% ÏÑ±Ïû•ÌïòÍ≥† ÏûàÏñ¥, ÏÇ¨Ïö©Ïûê ÎßûÏ∂§Ìòï Í∏∞Îä•Ïù¥ ÌïµÏã¨ Ìä∏Î†åÎìúÏûÖÎãàÎã§. ÌäπÌûà Í∞úÏù∏Ïùò Ïö¥Îèô Ìå®ÌÑ¥ÏùÑ ÌïôÏäµÌïòÏó¨ ÏµúÏ†ÅÌôîÎêú Î£®Ìã¥ÏùÑ Ï†úÍ≥µÌïòÎäî Í∏∞Îä•Ïùò ÎßåÏ°±ÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.',
                    metrics: [
                        {value: '45%', label: 'ÏÑ±Ïû•Î•†'},
                        {value: '78%', label: 'Í∞úÏù∏Ìôî ÏÑ†Ìò∏ÎèÑ'},
                        {value: '2.1Î∞∞', label: 'ÎßåÏ°±ÎèÑ Ï¶ùÍ∞Ä'}
                    ]
                },
                {
                    message: 'ÏÇ¨Ïö©Ïûê Ï§ëÏã¨Ï†ÅÏù∏ Ï†ëÍ∑ºÏù¥Íµ∞Ïöî! ÌÉÄÍ≤ü ÌéòÎ•¥ÏÜåÎÇò Î∂ÑÏÑùÏùÑ ÌôúÏö©Ìï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'Ìó¨Ïä§ ÎπÑÍ∏∞ÎÑàÎì§Ïùò 89%Í∞Ä Ïâ¨Ïö¥ ÏãúÏûëÏùÑ ÏõêÌïòÍ≥†, 76%Í∞Ä ÏÑ±Ï∑®Í∞êÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌï©ÎãàÎã§. ÎòêÌïú Ï≤´ 2Ï£ºÍ∞ÑÏùò Í≤ΩÌóòÏù¥ Ïû•Í∏∞ ÏÇ¨Ïö©Î•†ÏùÑ Í≤∞Ï†ïÌïòÎäî ÌïµÏã¨ Í∏∞Í∞ÑÏûÖÎãàÎã§.',
                    metrics: [
                        {value: '89%', label: 'Ïâ¨Ïö¥ ÏãúÏûë ÏÑ†Ìò∏'},
                        {value: '76%', label: 'ÏÑ±Ï∑®Í∞ê Ï§ëÏãú'},
                        {value: '2Ï£º', label: 'Í≤∞Ï†ïÏ†Å Í∏∞Í∞Ñ'}
                    ]
                },
                {
                    message: 'Ìä∏Î†åÎìúÏóê ÎßûÎäî Î∞©Ìñ•ÏûÖÎãàÎã§! ÏóÖÍ≥Ñ Îç∞Ïù¥ÌÑ∞Î•º ÌôïÏù∏Ìï¥Î≥¥Í≤†ÏäµÎãàÎã§.',
                    insight: 'ÏÜåÏÖú ÌîºÌä∏ÎãàÏä§ Í∏∞Îä•Ïùò ÏÇ¨Ïö©Ïûê Ï∞∏Ïó¨ÎèÑÍ∞Ä 60% Ï¶ùÍ∞ÄÌñàÍ≥†, ÏòàÎ∞© Ï§ëÏã¨ Ìó¨Ïä§ÏºÄÏñ¥Í∞Ä 32% ÏãúÏû• Ï†êÏú†Ïú®ÏùÑ Ï∞®ÏßÄÌïòÍ≥† ÏûàÏäµÎãàÎã§. Ïª§ÎÆ§ÎãàÌã∞ Í∏∞Î∞ò ÎèôÍ∏∞Î∂ÄÏó¨Í∞Ä Ìö®Í≥ºÏ†ÅÏûÖÎãàÎã§.',
                    metrics: [
                        {value: '60%', label: 'Ï∞∏Ïó¨ÎèÑ Ï¶ùÍ∞Ä'},
                        {value: '32%', label: 'ÏãúÏû• Ï†êÏú†Ïú®'},
                        {value: '3.4Î∞∞', label: 'ÎèôÍ∏∞Î∂ÄÏó¨ Ìö®Í≥º'}
                    ]
                }
            ];

            const randomResponse = ragResponses[Math.floor(Math.random() * ragResponses.length)];
            addAIMessageWithDetailedInsight(randomResponse.message, randomResponse.insight, randomResponse.metrics, []);

            // Update progress occasionally
            if (Math.random() > 0.7) {
                setTimeout(() => {
                    updateProgress(Math.min(100, getCurrentProgress() + 15));
                }, 2000);
            }
        }

        // Progress management
        function updateProgress(percentage) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const steps = document.querySelectorAll('#progressSteps .step');
            
            progressFill.style.width = percentage + '%';
            
            const currentStep = Math.ceil((percentage / 100) * 6);
            const stepNames = ['Î¶¨ÏÑúÏπò', 'ÏïÑÏù¥ÎîîÏñ¥', 'Í∏∞Ìöç', 'ÎîîÏûêÏù∏', 'ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ', 'Í≤ÄÏ¶ù'];
            
            progressText.textContent = `${Math.min(currentStep, 6)}/6 Îã®Í≥Ñ ÏôÑÎ£å (${percentage}%)`;
            
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                    step.innerHTML = `‚úÖ ${stepNames[index]}`;
                } else if (index === currentStep - 1 && currentStep <= 6) {
                    step.classList.add('active');
                    step.innerHTML = `üîÑ ${stepNames[index]}`;
                } else {
                    step.innerHTML = `‚è≥ ${stepNames[index]}`;
                }
            });
        }

        function getCurrentProgress() {
            const progressFill = document.getElementById('progressFill');
            return parseInt(progressFill.style.width) || 33;
        }

        // UI utilities
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        function scrollToBottom() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            if (isTyping) return;
            isTyping = true;
            
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                        RAG Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Ï§ë...
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }

        // RAG data simulation - Update trends and personas periodically
        function updateRAGData() {
            const trendValues = document.querySelectorAll('.trend-value');
            trendValues.forEach(item => {
                if (Math.random() > 0.8) {
                    const currentText = item.textContent;
                    if (currentText.includes('%')) {
                        const baseValue = parseInt(currentText);
                        const newValue = baseValue + Math.floor(Math.random() * 3 - 1);
                        item.textContent = `${newValue}%`;
                        
                        item.style.background = '#FEF3C7';
                        setTimeout(() => {
                            item.style.background = '';
                        }, 2000);
                    }
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            scrollToBottom();
            document.getElementById('messageInput').focus();
            
            setInterval(updateRAGData, 45000);
            
            setTimeout(() => {
                const badges = document.querySelectorAll('.rag-badge');
                badges.forEach(badge => {
                    if (badge.textContent === 'Ïã§ÏãúÍ∞Ñ') {
                        setInterval(() => {
                            badge.style.background = badge.style.background === 'rgb(239, 68, 68)' ? '#10B981' : '#EF4444';
                        }, 5000);
                    }
                });
            }, 3000);
        });
    </script>
</body>
</html>